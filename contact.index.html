<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Chatbot</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" />

<!-- Der Abruf von Google-Fonts darf nur im Kontext "Clara free" aktiviert sein! -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500&amp;display=swap" rel="stylesheet" />


<style>

/* ########################creamco

:root {

  --rules-customer: creamco; 
  --company-main-url: "https://www.cream-collection.de";
  --company-logo-url: url("https://www.cream-collection.de/wp-content/uploads/go-x/u/59b84de7-525d-4992-99ec-ac57b73c25b6/image-640x211.png");
  --company-logo-width: 200px;
  --company-logo-height: 80px;
  --media-company-logo-width: 200px;
  --media-company-logo-height: 40px;
  --company-logo-background: var(--secondary-background-color);
  --company-name: "cream collection Stephan Vila";
  --company-street: "Roswithastraße 28";
  --company-city: "45131 Essen";
  --company-email: "stephan.vila@cream-collection.de";
  --primary-company-color: #3FA6C7;
  --secondary-company-color: #D87A92;
  --tertiary-company-color: #707B84;
  --tertiary-company-color-light: #F1F2F3;
  --website-standard-font-color-light: #fff;
  --website-standard-font-color-dark: #000;
  --primary-company-border-radius: 8px;
  --company-font-family: 'Quicksand', sans-serif;
  --company-font-weight: 400;
  --company-font-size-title: 27px;
  --company-font-size-subtitle: 18px;
  --company-font-size-text: 18px;
  --company-font-size-fineprint: 18px;
  --company-font-size-button: 18px;
  --form-and-field-company-color: #fff;
  --form-and-field-border-company-color: #707B84;
  --primary-background-company-color: #fff;
  --modal-background: rgba(0, 0, 0, 0.5);
  --clara-image-url: url("https://www.cream-collection.de/wp-content/uploads/go-x/u/8b4f2525-c964-461b-a6a9-daa9ef61f180/l0,t0,w482,h410/image-240x204.jpg");
########################*/

/* ########################customer

:root {

  --rules-customer: Adelta.Finanz; 
  --company-main-url: "https://www.adeltafinanz.com/";
  --company-logo-url: url("https://www.adeltafinanz.com/wp-content/uploads/2019/10/adelta-finanz-ag_factoring_abrechnungsservice.svg");
  --company-logo-width: 300px;
  --company-logo-height: 80px;
  --media-company-logo-width: 300px;
  --media-company-logo-height: 40px;
  --company-logo-background: var(--secondary-background-color);
  --company-name: "ADELTA.FINANZ AG";
  --company-street: "Marc-Chagall-Straße 2";
  --company-city: "40477 Düsseldorf";
  --company-email: "stephan.vila@cream-collection.de";
  --primary-company-color: #154D7F;
  --secondary-company-color: #0085CD;
  --tertiary-company-color: #939393;
  --tertiary-company-color-light: #EAEAEA;
  --website-standard-font-color-light: #fff;
  --website-standard-font-color-dark: #000;
  --primary-company-border-radius: 8px;
  --company-font-family: 'Quicksand', sans-serif;
  --company-font-weight: 300;
  --company-font-size-title: 27px;
  --company-font-size-subtitle: 18px;
  --company-font-size-text: 18px;
  --company-font-size-finePrint: 18px;
  --company-font-size-button: 18px;
  --form-and-field-company-color: #eaeaea;
  --form-and-field-border-company-color: #D3E3F0;
  --primary-background-company-color: #fff;
  --modal-background: rgba(0, 0, 0, 0.5);
  --clara-image-url: url("https://rosendo99er.github.io/images/3BA32B98-B14A-41F6-9F4D-F2428F1E1E36.jpeg");

########################*/




/* ########################customer########################*/

:root {

--rules-customer: regis24; 
--company-main-url: "https://www.regis24.de/.com/";
--company-logo-url: url("https://www.regis24.de/wp-content/uploads/2020/12/website_logo_header_5b.png");
--company-logo-width: 300px;
--company-logo-height: 80px;
--media-company-logo-width: 300px;
--media-company-logo-height: 40px;
--company-logo-background: var(--secondary-background-color);
--company-name: "Regis24 GmbH";
--company-street: "Alte Rhinstr. 16";
--company-city: "12681 Berlin";
--company-email: "stephan.vila@cream-collection.de";
--primary-company-color: #002f37;
--secondary-company-color: #FF5000;
--tertiary-company-color: #646464;
--tertiary-company-color-light: #FEFFFD;
--website-standard-font-color-light: #FEFFFD;
--website-standard-font-color-dark: #002F37;
--primary-company-border-radius: 8px;
--company-font-family: 'Quicksand', sans-serif;
--company-font-weight: 300;
--company-font-size-title: 27px;
--company-font-size-subtitle: 18px;
--company-font-size-text: 18px;
--company-font-size-finePrint: 18px;
--company-font-size-button: 18px;
--form-and-field-company-color: #EFF3F6;
--form-and-field-border-company-color: #646464;
--primary-background-company-color: #EFF3F6;
--modal-background: rgba(0, 0, 0, 0.5);
--clara-image-url: url("https://rosendo99er.github.io/images/Chat bearbeitet.png");




  --primary-link-color: var(--primary-company-color);
  --secondary-link-color: var(--secondary-company-color);


  --body-background-color: var(--primary-background-company-color);

  --primary-border-color:   var(--form-and-field-border-company-color);
  --secondary-border-color: var(--primary-company-color);
  --tertiary-border-color:  var(--tertiary-company-color);


  --primary-font-color: var(--primary-company-color);
  --secondary-font-color: var(--secondary-company-color);
  --tertiary-font-color:  var(--website-standard-font-color-light);
  --tertiary-font-color-dark: var(--website-standard-font-color-dark);
 

  --primary-button-color: var(--primary-company-color);
  --secondary-button-color: var(--secondary-company-color);

  --primary-loader-color: var(--tertiary-company-color-light);
  --secondary-loader-color: var(--primary-company-color);

  --primary-background-color: var(--primary-background-company-color);
  --secondary-background-color: var(--tertiary-company-color-light);
  --special-background-color: var(--primary-company-color);

  --primary-border-radius: var(--primary-company-border-radius);

  --font-size-title: var(--company-font-size-title);
  --font-size-subtitle: var(--company-font-size-subtitle);
  --font-size-text: var(--company-font-size-text);
  --font-size-fineprint: var(--company-font-size-fineprint);
  --font-size-button: var(--company-font-size-button);

  --media-font-size-title: 21px;
  --media-font-size-subtitle: 18px;
  --media-font-size-text: 16px;
  --media-font-size-fineprint: 12px;
  --media-font-size-button: 16px;

}


/* ++++++++++++++++++++++++ Anwendung Clara free ++++++++++++++++++++++++ 

:root {
--rules-context: ChatbotIntern; 
}

html, body {
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  }


#logo-header {
    width: 100%;
    height: 10vh;
    min-height: 120px;
    background-color: var(--company-logo-background);
    display: flex;
    align-items: center;
    padding-left: 20px;
    box-sizing: border-box;
    margin-bottom: 0px;
    z-index: 1;
}

#footer {
    width: 100%;
    height: 10vh;
    background-color: var(--primary-company-color);
    display: flex;
    align-items: center;
    margin-top: 0px;
    bottom: 0;
    }


#company-logo {
    background-image: var(--company-logo-url);
    background-size: contain;
    background-repeat: no-repeat;
    width: var(--company-logo-width); 
    height: var(--company-logo-height);
}



#section-container {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary-background-color);
    border: 0px solid var(--secondary-border-color);
    border-radius: var(--primary-border-radius);
    overflow: hidden; 
    box-sizing: border-box; 
    width: 100%;
    height: 80vh;
    min-height: 815px;
    z-index: 1;    
  }

#toggle-container {
    display: block;
    width: 1000px;
    height: 60vh;
    min-height: 790px;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--primary-background-color);
    border: 0px solid var(--primary-border-color);
    border-radius: var(--primary-border-radius);
    overflow: hidden; 
    box-sizing: border-box; 
    padding: 5px;
    z-index: 2;
  }


#title-container {
  display: flex;
}

.title-content .custom0c-p {
  display: none;
}

#clara-image {
  display: block;
}

#factoring-section-container {
  display: none;
}

#factoring-instant-answer-dialog-button-container {
  display: none;
}



@media screen and (max-width: 850px) {


  html, body {
    font-family: var(--company-font-family);
    background-color: var(--primary-background-color);
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    width: 100vw;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }


  #logo-header {
    width: 100%;
    height: 10vh;
    min-height: 60px !important;
    background-color: var(--company-logo-background);
    display: flex;
    align-items: center;
    justify-content: center !important;
    padding: 0px !important;
    box-sizing: border-box;
    margin-bottom: 0px;
    z-index: 1;
}


  #footer {
    height: 10vh;
    min-height: 60px;
    }


  #company-logo {
    background-image: var(--company-logo-url);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center; 
    width: var(--media-company-logo-width); 
    height: var(--media-company-logo-height);
  }

  #section-container {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    background-color: var(--primary-background-color);
    border: 0px solid var(--secondary-border-color);
    border-radius: 0 !important;
    overflow: hidden; 
    box-sizing: border-box; 
    width: 100%;
    height: 80vh !important;
    min-height: 80vh !important;
    z-index: 1;    
  }

  #toggle-container {
    display: block;
    width: 100%;
    height: 80vh !important;
    min-height: 80vh !important;
    max-width: none;
    max-height: 80% !important;
    background-color: var(--primary-background-color);
    border: 0px solid var(--primary-border-color) !important;
    border-radius: 0 !important;
    overflow: hidden; 
    box-sizing: border-box; 
    padding: 0px;
    z-index: 2;
  }


  #chatbot-container {
    flex-grow: 1;
    flex-direction: column;
    align-items: center;
    width: 100%;
    height: 63vh !important;
    box-sizing: border-box;
    overflow-y: auto;
    overflow-x: hidden !important;
    padding: 0px 2px 0px 2px;
    border: 0px solid var(--tertiary-border-color);
  }



#chatbot {
  width: 100%;
  height: 63vh !important;
  min-height: 63vh !important;
  max-height: 63vh !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  z-index: 2; 
  position: static;
}



#title-container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  padding: 5px 0px 5px 0px !important; 
  margin-top: 0px !important;
  background-color: var(--primary-company-color) !important;
}




#title-container .title-content {
    position: relative;
    width: 100%;
    padding: 0px;
    margin: 0px;
    text-align: center;
    justify-content: center;
}



.title-content .custom0c-p {
  display: block;
  font-family: var(--company-font-family);
  font-weight: 400 !important;
  color: var(--tertiary-font-color) !important;
  font-size: var(--media-font-size-title) !important;
  margin: 0 !important;
  text-align: center;
  justify-content: center;  
}

    
.title-content .custom0a-p {
  display: none;
}

.title-content .custom0b-p {
  display: none;
}

#clara-image {
  display: none;
}


#chatbot-header {

  display: flex; 
  align-items: center; 
  width: 100%; 
  box-sizing: border-box; 
  padding: 10px !important;
  border-bottom: 1px solid #ddd;
}



#chatbot-input-container {
  display: flex;
  flex-direction: column;
  height: auto;
  width: 100%;
  padding: 10px !important;
  box-sizing: border-box;
  background-color: var(--secondary-background-color);
  border-radius: 0px 0px var(--primary-border-radius) var(--primary-border-radius);
  margin-top: 10px;
  min-height: 60px !important;
  z-index: 2;
}



#chatbot-input {
  display: block !important;
  font-family: var(--company-font-family) !important;
  font-size: var(--media-font-size-text) !important;
  color: var(--primary-font-color) !important;
  font-weight: normal !important;
  padding: 5px 10px 5px 10px !important;
  border: 1px solid var(--primary-border-color) !important;
  border-radius: var(--primary-border-radius) !important;
  margin: 0px !important;
  width: 100% !important;
  height: 45px !important;
  min-height: 45px !important;
  max-height: 122px !important;
  overflow-y: auto !important;
  box-sizing: border-box !important;
  resize: vertical !important;
}

#chatbot-input:focus {
  border-color: var(--secondary-border-color) !important;
  outline: none !important;
}



#chatbot-input::placeholder {
  color: var(--secondary-font-color);
  font-family: var(--company-font-family);
  font-size: var(--media-font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}


}



#contact-form-title-container {
  display: none;
}


#contact-form-container {
  display: none;
}

#input-button-container {
  display: none;
}


#back-to-outlook-container {
  display: none;
}


#instant-answer-dialog-button-container {
  display: none;
}

.icon4 {
    display: none;
}




 ++++++++++++++++++++++++ ENDE Anwendung Clara free ++++++++++++++++++++++++ */






/* ++++++++++++++++++++++++ Anwendung Clara ++++++++++++++++++++++++ 

:root {
--rules-context: ChatbotConsumer; 
}

#logo-header {
    display: none;
}

#footer {
    display: none;
}

#title-container {
  display: flex;
}

.title-content .custom0c-p {
  display: none;
}

#clara-image {
  display: block;
}


#factoring-section-container {
  display: none;
}

#factoring-instant-answer-dialog-button-container {
  display: none;
}



@media screen and (max-width: 850px) {

    #title-container {
        width: 100%;
        padding: 0px;
        margin: 0px;

    }

    .title-content {
        width: 100%;
        padding: 0px;
        margin: 0px;
    }

    .title-content .custom0a-p {
        margin-left: 0px;

    }

    .title-content .custom0b-p {
        display: none;

    }

    .title-content .custom0c-p {
        color: var(--primary-font-color);
        font-size: var(--media-font-size-subtitle);
        hyphens: auto;
        word-wrap: break-word;  
        margin-left: 0px;
     }

    #clara-image {
        display: none;
        width: 0 !important;
        height: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        visibility: hidden !important;
        opacity: 0 !important;
    }
}


#contact-form-title-container {
  display: none;
}


#contact-form-container {
  display: none;
}

#input-button-container {
  display: none;
}


#back-to-outlook-container {
  display: none;
}


#chatbot-container {
  display: flex;
  margin-top: 10px;
}

#instant-answer-dialog-button-container {
  display: none;
}

.icon4 {
    display: none;
}



  ++++++++++++++++++++++++ ENDE Anwendung Clara ++++++++++++++++++++++++ */




/* ++++++++++++++++++++++++ Anwendung Chatbot mit Kontaktformular ++++++++++++++++++++++++ */

:root {
--rules-context: ChatbotContact; 
}


html, body {
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  }


#logo-header {
    width: 100%;
    height: 10vh;
    min-height: 120px;
    background-color: var(--company-logo-background);
    display: flex;
    align-items: center;
    padding-left: 20px;
    box-sizing: border-box;
    margin-bottom: 0px;
}

#footer {
    width: 100%;
    height: 10vh;
    background-color: var(--primary-company-color);
    display: flex;
    align-items: center;
    margin-top: 0px;
    bottom: 0;
    }


#company-logo {
    background-image: var(--company-logo-url);
    background-size: contain;
    background-repeat: no-repeat;
    width: var(--company-logo-width); 
    height: var(--company-logo-height);
    
}



#section-container {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    background-color: var(--primary-background-color);
    border: 0px solid var(--secondary-border-color);
    border-radius: var(--primary-border-radius);
    overflow: hidden; 
    box-sizing: border-box; 
    width: 100%;
    height: 80vh;
    min-height: 815px;
    z-index: 1;    
  }

#toggle-container {
    display: block;
    width: 1000px;
    height: 60vh;
    min-height: 790px;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--primary-background-color);
    border: 0px solid var(--primary-border-color);
    border-radius: 0;
    overflow: hidden; 
    box-sizing: border-box; 
    padding: 0px;
    z-index: 2;
  }


#factoring-section-container {
  display: none;
}


#factoring-instant-answer-dialog-button-container {
  display: none;
}



#title-container {
  display: none;
}

#contact-form-title-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  padding: 5px 0px 5px 0px; 
  margin-bottom: 20px;
  background-color: var(--primary-company-color);
}




#contact-form-title-container .contact-form-title-content {
    position: relative;
    width: 1000px;
    padding: 0px;
    margin: 0px;
    text-align: center;
    justify-content: center;
    border: 0px solid #fff;
    border-radius: 0;
}


.contact-form-title-content .contact-form-custom0c-p {
  display: block;
  font-family: var(--company-font-family);
  font-weight: 400;
  color: var(--tertiary-font-color);
  font-size: var(--font-size-title);
  margin: 0;
  text-align: left;
  justify-content: center;  
  padding-left: 20px;
}




#clara-image {
  display: none;
}




#contact-form-section-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: var(--primary-background-color);
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  overflow: hidden; 
  box-sizing: border-box; 
  width: 100%;
  z-index: 1;
}



#contact-form-container {
  flex-direction: column;
  align-items: center;
  width: 1000px;
  box-sizing: border-box;
  overflow: hidden;
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  padding: 0px 9px 0px 8px;
  position: relative;
  }




.contact-form-aktennummer {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}


.contact-form-aktennummer,
.contact-form-aktennummer:valid
{
  background-color: var(--primary-background-company-color);
}

.contact-form-aktennummer:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;    
}




.contact-form-aktennummer::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-name {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}

.contact-form-name,
.contact-form-name:valid
{
  background-color: var(--primary-background-company-color);
}

.contact-form-name:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;    
}




.contact-form-name::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-email {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}

.contact-form-email,
.contact-form-email:valid
{
  background-color: var(--primary-background-company-color);
}

.contact-form-email:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;    
}





.contact-form-email::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-nachricht {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.5em * 6 + 20px);
}




#modalMessage {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none; 
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.5em * 6 + 20px);
}



.contact-form-nachricht,
.contact-form-nachricht:valid
{
  background-color: var(--primary-background-company-color);
}

.contact-form-nachricht:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}


.modalMessage,
.modalMessage:valid
{
  background-color: var(--primary-background-company-color);
}

.modalMessage:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}








.contact-form-nachricht::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}



#modalMessage::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  padding-left: 0px;
}









#contact-form-container {
  display: block;
}

#input-button-container {
  display: flex;
}


#back-to-outlook-container {
  display: none;
}


#chatbot-container {
  display: none;
  margin-top: 10px;
}

#instant-answer-dialog-button-container {
  display: flex;
}




@media screen and (max-width: 850px) {


html, body {
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}


#logo-header {
  width: 100%;
  height: 10vh;
  min-height: 60px !important;
  background-color: var(--company-logo-background);
  display: flex;
  align-items: center;
  justify-content: center !important;
  padding: 0px !important;
  box-sizing: border-box;
  margin-bottom: 0px;
}


#footer {
  height: 10vh;
  min-height: 60px;
  }


#company-logo {
  background-image: var(--company-logo-url);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center; 
  width: var(--media-company-logo-width); 
  height: var(--media-company-logo-height);
}


#contact-form-title-container {
  display: block;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  padding: 5px 0px 5px 0px !important; 
  margin-top: 0px !important;
  background-color: var(--primary-company-color) !important;
}




#contact-form-title-container .contact-form-title-content {
    position: relative;
    width: 100%;
    padding: 0px;
    margin: 0px;
    text-align: center;
    justify-content: center;
}





.contact-form-title-content .contact-form-custom0c-p {
  display: block;
  font-family: var(--company-font-family);
  font-weight: 400 !important;
  color: var(--tertiary-font-color) !important;
  font-size: var(--media-font-size-title) !important;
  margin: 0 !important;
  text-align: center;
  justify-content: center;  
  padding-left: 0px;
}


.contact-form-aktennummer {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}



.contact-form-name {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}


.contact-form-email {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}






.contact-form-nachricht {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.2em * 4 + 20px) !important;
}



#section-container {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  background-color: var(--primary-background-color);
  border: 0px solid var(--secondary-border-color);
  border-radius: 0 !important;
  overflow: hidden; 
  box-sizing: border-box; 
  width: 100%;
  height: 100vh !important;
  min-height: 100vh !important;
  z-index: 1;    
}

#toggle-container {
  display: block;
  width: 100%;
  height: 100vh !important;
  min-height: 100vh !important;
  max-width: none;
  max-height: 100% !important;
  background-color: var(--primary-background-color);
  border: 0px solid var(--primary-border-color) !important;
  border-radius: 0 !important;
  overflow: hidden; 
  box-sizing: border-box; 
  padding: 0px;
  z-index: 2;
}


#chatbot-container {
  flex-grow: 1;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 85vh !important;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden !important;
  padding: 0px;
  border: 0px solid var(--primary-border-color) !important;
}



#chatbot {
  width: 100%;
  height: 75vh !important;
  min-height: 63vh !important;
  max-height: 75vh !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  border: 1px solid var(--primary-border-color) !important;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  z-index: 2; 
  position: static;
}


#chatbot-header {

display: flex; 
align-items: center; 
width: 100%; 
box-sizing: border-box; 
padding: 10px !important;
border-bottom: 1px solid #ddd;
}



#chatbot-input-container {
display: flex;
flex-direction: column;
height: auto;
width: 100%;
padding: 10px !important;
box-sizing: border-box;
background-color: var(--secondary-background-color);
border-radius: 0px 0px var(--primary-border-radius) var(--primary-border-radius);
margin-top: 10px;
min-height: 60px !important;
z-index: 2;
}



#chatbot-input {
display: block !important;
font-family: var(--company-font-family) !important;
font-size: var(--media-font-size-text) !important;
color: var(--primary-font-color) !important;
font-weight: normal !important;
padding: 5px 10px 5px 10px !important;
border: 1px solid var(--primary-border-color) !important;
border-radius: var(--primary-border-radius) !important;
margin: 0px !important;
width: 100% !important;
height: 45px !important;
min-height: 45px !important;
max-height: 122px !important;
overflow-y: auto !important;
box-sizing: border-box !important;
resize: vertical !important;
}

#chatbot-input:focus {
border-color: var(--secondary-border-color) !important;
outline: none !important;
}



#chatbot-input::placeholder {
color: var(--secondary-font-color);
font-family: var(--company-font-family);
font-size: var(--media-font-size-text);
font-style: italic;
font-weight: normal;
padding-left: 0px;
}



#contact-form-container {
  flex-direction: column;
  align-items: center;
  width: 100% !important;
  box-sizing: border-box;
  overflow: hidden;
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  padding: 0px 9px 0px 8px;
  position: relative;
  }



}



  /* ++++++++++++++++++++++++ ENDE Anwendung Chatbot mit Kontaktformular ++++++++++++++++++++++++ */


/* ++++++++++++++++++++++++ Anwendung Chatbot für Factoring ++++++++++++++++++++++++ 

:root {
--rules-context: ChatbotContactFactoring; 
}


html, body {
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}



#logo-header {
    width: 100%;
    height: 10vh;
    min-height: 120px;
    background-color: var(--company-logo-background);
    display: flex;
    align-items: center;
    padding-left: 20px;
    box-sizing: border-box;
    margin-bottom: 0px;
}

#footer {
    width: 100%;
    height: 10vh;
    background-color: var(--primary-company-color);
    display: flex;
    align-items: center;
    margin-top: 0px;
    bottom: 0;
    }


#company-logo {
    background-image: var(--company-logo-url);
    background-size: contain;
    background-repeat: no-repeat;
    width: var(--company-logo-width); 
    height: var(--company-logo-height);
}



#section-container {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    background-color: var(--primary-background-color);
    border: 0px solid var(--secondary-border-color);
    border-radius: var(--primary-border-radius);
    overflow: hidden; 
    box-sizing: border-box; 
    width: 100%;
    height: 80vh;
    min-height: 815px;
    z-index: 1;    
  }

#toggle-container {
    display: block;
    width: 1000px;
    height: 60vh;
    min-height: 790px;
    max-width: 100%;
    max-height: 100%;
    background-color: var(--primary-background-color);
    border: 0px solid var(--primary-border-color);
    border-radius: 0;
    overflow: hidden; 
    box-sizing: border-box; 
    padding: 0px;
    z-index: 2;
  }


#title-container {
  display: none;
}


#contact-form-section-container {
  display: none;
}


#factoring-section-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: var(--primary-background-color);
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  overflow: hidden; 
  box-sizing: border-box; 
  width: 100%;
  z-index: 1;
}






#contact-form-title-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  padding: 5px 0px 5px 0px; 
  margin-bottom: 20px;
  background-color: var(--primary-company-color);
}




#contact-form-title-container .contact-form-title-content {
    position: relative;
    width: 1000px;
    padding: 0px;
    margin: 0px;
    text-align: center;
    justify-content: center;
    border: 0px solid #fff;
    border-radius: 0;
}


.contact-form-title-content .contact-form-custom0c-p {
  display: block;
  font-family: var(--company-font-family);
  font-weight: 400;
  color: var(--tertiary-font-color);
  font-size: var(--font-size-title);
  margin: 0;
  text-align: left;
  justify-content: center;  
  padding-left: 20px;
}




#clara-image {
  display: none;
}






#factoring-container {
  flex-direction: column;
  align-items: center;
  width: 1000px;
  box-sizing: border-box;
  overflow: hidden;
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  padding: 0px 9px 0px 8px;
  position: relative;
  }




  .rechnungssteller {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}

.rechnungssteller,
.rechnungssteller:valid
{
  background-color: var(--primary-background-company-color);
}

.rechnungssteller:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}



.rechnungssteller::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}






.rechnungsnummer {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}

.rechnungsnummer,
.rechnungsnummer:valid
{
  background-color: var(--primary-background-company-color);
}

.rechnungsnummer:focus {
    background-color: var(--primary-background-company-color);
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}


.rechnungsnummer::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-name {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}

.contact-form-name,
.contact-form-name:valid
{
  background-color: var(--primary-background-company-color) !important;
}

.contact-form-name:focus {
    background-color: var(--primary-background-company-color) !important;
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}






.contact-form-name::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-email {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 42px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}



.contact-form-email,
.contact-form-email:valid
{
  background-color: var(--primary-background-company-color) !important;
}

.contact-form-email:focus {
    background-color: var(--primary-background-company-color) !important;
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}




.contact-form-email::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




.contact-form-nachricht {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.5em * 6 + 20px);
}




#modalMessage {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none; 
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.5em * 6 + 20px);
}



.contact-form-nachricht,
.contact-form-nachricht:valid
{
  background-color: var(--primary-background-company-color) !important;
}

.contact-form-nachricht:focus {
    background-color: var(--primary-background-company-color) !important;
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}


.modalMessage,
.modalMessage:valid
{
  background-color: var(--primary-background-company-color) !important;
}

.modalMessage:focus {
    background-color: var(--primary-background-company-color) !important;
    border: 2px solid var(--secondary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
}



.contact-form-nachricht::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}



#modalMessage::placeholder {
  color: var(--secondary-font-color);
  font-size: var(--font-size-text);
  font-style: italic;
  padding-left: 0px;
}


#contact-form-container {
  display: block;
}

#input-button-container {
  display: flex;
}


#back-to-outlook-container {
  display: none;
}


#chatbot-container {
  display: none;
  margin-top: 10px;
}

#instant-answer-dialog-button-container {
  display: none;
}

#factoring-instant-answer-dialog-button-container {
  display: flex !important;
}


@media screen and (max-width: 850px) {


html, body {
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow-y: auto;
  display: flex;
  flex-direction: column;  
}


#logo-header {
  width: 100%;
  height: 10vh;
  min-height: 60px !important;
  background-color: var(--company-logo-background);
  display: flex;
  align-items: center;
  justify-content: center !important;
  padding: 0px !important;
  box-sizing: border-box;
  margin-bottom: 0px;
}


#footer {
  height: 10vh;
  min-height: 60px;
  }


#company-logo {
  background-image: var(--company-logo-url);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center; 
  width: var(--media-company-logo-width); 
  height: var(--media-company-logo-height);
}


#contact-form-title-container {
  display: block;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  padding: 5px 0px 5px 0px !important; 
  margin-top: 0px !important;
  background-color: var(--primary-company-color) !important;
}




#contact-form-title-container .contact-form-title-content {
    position: relative;
    width: 100%;
    padding: 0px;
    margin: 0px;
    text-align: center;
    justify-content: center;
}





.contact-form-title-content .contact-form-custom0c-p {
  display: block;
  font-family: var(--company-font-family);
  font-weight: 400 !important;
  color: var(--tertiary-font-color) !important;
  font-size: var(--media-font-size-title) !important;
  margin: 0 !important;
  text-align: center;
  justify-content: center;  
  padding-left: 0px;
}



.rechnungssteller {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}


.rechnungsnummer {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px;
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}



.contact-form-name {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}


.contact-form-email {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 5px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  height: 35px; 
  overflow: hidden;
  white-space: nowrap;
  box-sizing: border-box;
  position: relative;
}






.contact-form-nachricht {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  flex: 1;
  padding: 10px 10px 10px 30px;
  border: 1px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 5px;
  margin-left: 0px;
  margin-right: 0px;
  width: 100%;
  resize: none;
  box-sizing: border-box;
  overflow: auto;
  white-space: normal;
  max-height: calc(1.2em * 4 + 20px) !important;
}



#section-container {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  background-color: var(--primary-background-color);
  border: 0px solid var(--secondary-border-color);
  border-radius: 0 !important;
  overflow: hidden; 
  box-sizing: border-box; 
  width: 100%;
  height: 100vh !important;
  min-height: 100vh !important;
  z-index: 1;    
}

#toggle-container {
  display: block;
  width: 100%;
  height: 100vh !important;
  min-height: 100vh !important;
  max-width: none;
  max-height: 100% !important;
  background-color: var(--primary-background-color);
  border: 0px solid var(--primary-border-color) !important;
  border-radius: 0 !important;
  overflow: hidden; 
  box-sizing: border-box; 
  padding: 0px;
  z-index: 2;
}


#chatbot-container {
  flex-grow: 1;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 85vh !important;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden !important;
  padding: 0px;
  border: 0px solid var(--primary-border-color) !important;
}



#chatbot {
  width: 100%;
  height: 75vh !important;
  min-height: 63vh !important;
  max-height: 75vh !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  border: 1px solid var(--primary-border-color) !important;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  z-index: 2; 
}


#chatbot-header {

display: flex; 
align-items: center; 
width: 100%; 
box-sizing: border-box; 
padding: 10px !important;
border-bottom: 1px solid #ddd;
}



#chatbot-input-container {
display: flex;
flex-direction: column;
height: auto;
width: 100%;
padding: 10px !important;
box-sizing: border-box;
background-color: var(--secondary-background-color);
border-radius: 0px 0px var(--primary-border-radius) var(--primary-border-radius);
margin-top: 10px;
min-height: 60px !important;
z-index: 2;
}



#chatbot-input {
display: block !important;
font-family: var(--company-font-family) !important;
font-size: var(--media-font-size-text) !important;
color: var(--primary-font-color) !important;
font-weight: normal !important;
padding: 5px 10px 5px 10px !important;
border: 1px solid var(--primary-border-color) !important;
border-radius: var(--primary-border-radius) !important;
margin: 0px !important;
width: 100% !important;
height: 45px !important;
min-height: 45px !important;
max-height: 122px !important;
overflow-y: auto !important;
box-sizing: border-box !important;
resize: vertical !important;
}

#chatbot-input:focus {
border-color: var(--secondary-border-color) !important;
outline: none !important;
}



#chatbot-input::placeholder {
color: var(--secondary-font-color);
font-family: var(--company-font-family);
font-size: var(--media-font-size-text);
font-style: italic;
font-weight: normal;
padding-left: 0px;
}



#factoring-container {
  flex-direction: column;
  align-items: center;
  width: 100% !important;
  box-sizing: border-box;
  overflow: hidden;
  border: 0px solid var(--secondary-border-color);
  border-radius: 0;
  padding: 0px 9px 0px 8px;
  position: relative;
  }



}



  ++++++++++++++++++++++++ ENDE Anwendung Chatbot für Factoring ++++++++++++++++++++++++ */








/* ++++++++++++++++++++++++ Anwendung Chatbot mit Outlook ++++++++++++++++++++++++ 

:root {
--rules-context: ChatbotOutlook; 
}

#logo-header {
    display: none;
}

#footer {
    display: none;
}


#title-container {
  display: none;
}

#clara-image {
  display: none;
}



#contact-form-title-container {
  display: none;
}




#contact-form-container {
  display: block;
}


.contact-form-email {
  display: none;
}


.contact-form-name {
  display: none;
}


#input-button-container {
  display: flex;
}


#back-to-outlook-container {
  display: flex;
}


#chatbot-container {
  display: none;
  margin-top: -335px;
}

#instant-answer-dialog-button-container {
  display: flex;
}



#input-button-container {
  display: none;
}


 ++++++++++++++++++++++++ ENDE Anwendung Chatbot mit Outlook ++++++++++++++++++++++++ */




 


/* Für kleine Bildschirme (maximale Breite: 576px) */
@media screen and (max-width: 850px) {

    :root {
        --font-size-title: var(--media-font-size-title) !important;
        --font-size-subtitle: var(--media-font-size-subtitle) !important;
        --font-size-text: var(--media-font-size-text) !important;
        --font-size-fineprint: var(--media-font-size-fineprint) !important;
        --font-size-button: var(--font-size-button) !important;
    }

    *,
    *::before,
    *::after {
    box-sizing: border-box;
    }

    
  #title-container {
      flex-shrink: 0; 
    }

  #chatbot-consent-container {
      flex-shrink: 0; 
    }
 
  


    
    
    
    #chatbot-consent-label {
      font-size: var(--font-size-fineprint) !important;
    }

    .special-link-consent {
      font-size: var(--font-size-fineprint) !important;
    }


#chatbot-messages {
  position: relative;
  flex-grow: 1;
  overflow-y: auto;
  overflow-x: hidden; 
  border-bottom: 0px solid var(--primary-border-color); /* aktuell ausgeblendet */
  box-sizing: border-box;
  padding: 20px !important;
}




#chatbot-messages-gpt div {
  border-radius: var(--primary-border-radius);
  font-family: var(--company-font-family);
  font-size: var(--media-font-size-text) !important;
  overflow-x: hidden; 
}



#chatbot-messages-gpt .user-message {
  padding: 0px 0px 20px 30px !important;
  background-color: var(--primary-background-color);
  color: var(--primary-font-color);
  font-family: var(--company-font-family);
  font-size: var(--media-font-size-text) !important;
  font-weight: bold;
  text-align: right !important;
  margin-top: 0px !important;
}


#chatbot-messages-gpt .bot-message {
  padding: 0px 0px 20px 0px !important; 
  font-family: var(--company-font-family);
  background-color: var(--primary-background-color);
  text-align: left;
  color: var(--website-standard-font-color-dark);
  margin-top: 0px !important; 
  }




.special-link {
  color: var(--primary-link-color) !important;
  text-decoration: underline;
}



.special-link:visited {
  color: var(--secondary-link-color) !important;
}


.special-heading {
  color: var(--primary-company-color);
  font-family: var(--company-font-family);
  font-size: var(--media-font-size-text) !important;
  font-weight: bold;
  margin: 0;
  padding: 0;
}


.special-heading-in-standard-color {
  color: var(--website-standard-font-color-dark);
  font-family: var(--company-font-family);
  font-size: var(--media-font-size-text) !important;
  font-weight: bold;
  margin: 0;
  padding: 0;
}



.modal-standard-inner-large-content .custom-h2 {
    padding: 20px 0px 0px 0px !important;
    /*border-radius: var(--primary-border-radius);*/
    text-align: left !important;
    font-size: var(--font-size-title) !important;
    color: var(--primary-font-color) !important;
}

.modal-standard-inner-large-content .custom-h3 {
    padding: 20px 20px 0px 0px !important;
    border-radius: var(--primary-border-radius);
    text-align: left;
    font-size: var(--font-size-subtitle) !important;
    font-weight: bold;
    color: var(--secondary-font-color);
}



.modal-standard-inner-large-content p {
    font-size: var(--font-size-text);
    color: var(--website-standard-font-color-dark);
    padding: 20px 20px 20px 0px !important;
    margin: 0px;


}


.modal-standard-inner-large-content-ul {
    margin-left: 0px !important;
    padding-right: 0px;
}



.modal-standard-inner-large-content li {
    font-size: var(--font-size-text) !important;
    color: var(--website-standard-font-color-dark);
    margin-bottom: 10px;
    line-height: 1.2 !important;
    list-style-type: disc;
    padding-left: 0px !important;

}







}   /* Ende der Media Queries */




    #chatbot-header {

      display: flex;
      align-items: center;
      width: 100%; 
      box-sizing: border-box;
      padding: 20px;
      border-bottom: 1px solid #ddd;
    }


    #chatbot-language {
      display: flex;
      align-items: center;
      width: 130px;
      max-width: 40%;
      position: relative;
      margin-top: 0px;
      margin-bottom: 0px;
    }


    #selected-flag {
      margin-right: 5px;/* Fügt einen Abstand zwischen Fahne und Dropdown ein */
    }



    /* Dropdown-Styling für #language-dropdown */
    #language-dropdown {
      width: 100%; /* Nimmt die volle Breite der jeweiligen Container ein */
      padding: 5px; /* Optionales Padding für bessere Lesbarkeit */
      box-sizing: border-box; /* Bezieht Padding in die Gesamtbreite ein */
      font-family: var(--company-font-family);
      font-size: var(--font-size-text);
      color: var(--primary-font-color);
      border: none;
      background-color: var(--primary-background-color); /* Setzt die Hintergrundfarbe */
      margin-left: 20px;
    }


    /* Themenbereich in der Mitte, ebenfalls 40 % der Breite */
    #chatbot-themes {
      display: flex;
      align-items: center; /* Zentriert das Dropdown vertikal */
      width: 100px; 
      max-width: 40%; /* Nimmt 40 % der Breite von `#chatbot-header` ein */
      justify-content: center; /* Zentriert das Dropdown horizontal */
      margin-left: 10px;
    }

    /* Dropdown-Styling für #theme */
    #theme {
      width: 100%; /* Nimmt die volle Breite der jeweiligen Container ein */
      padding: 5px; /* Optionales Padding für bessere Lesbarkeit */
      box-sizing: border-box; /* Bezieht Padding in die Gesamtbreite ein */
      font-family: var(--company-font-family);
      font-size: var(--font-size-text);
      color: var(--primary-font-color);
      border: none;
      background-color: var(--primary-background-color); /* Setzt die Hintergrundfarbe */
    }

    /* Rechtsseitiger Bereich für Icons, nimmt 20 % der Breite ein */
    #chatbot-icons {
      display: flex;
      align-items: center; /* Zentriert die Icons vertikal */
      justify-content: flex-end; /* Positioniert Icons rechts im Header */
      flex-grow: 1;
      width: 20%; /* Nimmt 20 % der Breite von `#chatbot-header` ein */
    }

    








/* Hintergrund-Elemente blockieren */
body.modal-open {
    overflow: hidden; /* Verhindert Scrollen */
    pointer-events: none; /* Keine Interaktion mit dem Rest der Seite */
}

/* Pointer-Events nur für Modal-Elemente erlauben */
.modal,
.modal * {
    pointer-events: auto;
}




.website-standard-font {
  color: var(--website-standard-font-color-dark);
}





#chatbot-container {
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 80vh; /* Mindesthöhe für den Container */
  box-sizing: border-box;
  overflow: hidden; /* Verhindert ungewolltes Scrollen */
  padding: 0px 9px 0px 8px;
}



#instant-answer-dialog-button-container {
  flex-direction: column;
  align-items: center;
  width: 100%;
  min-height: 0px; /* Mindesthöhe für den Container */
  box-sizing: border-box;
  overflow-x: hidden; /* Verhindert ungewolltes Scrollen */
  padding: 0px 9px 0px 8px;
  margin-top: -20px;
}




#factoring-instant-answer-dialog-button-container {
  flex-direction: column;
  align-items: center;
  width: 100%;
  min-height: 0px; /* Mindesthöhe für den Container */
  box-sizing: border-box;
  overflow-x: hidden; /* Verhindert ungewolltes Scrollen */
  padding: 0px 9px 0px 8px;
  margin-top: -20px;
}



#instant-answer-dialog-button {
  display: block;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 20px; /* Passt den Abstand an */
  }

#instant-answer-dialog-button:hover {
  background-color: var(--secondary-button-color);
}





#factoring-instant-answer-dialog-button {
  display: block;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 20px; /* Passt den Abstand an */
  }

#factoring-instant-answer-dialog-button:hover {
  background-color: var(--secondary-button-color);
}





#instant-answer-dialog-schliessen-button {
  display: none;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 20px; /* Passt den Abstand an */
  }

#instant-answer-dialog-schliessen-button:hover {
  background-color: var(--secondary-button-color);
}





#factoring-message-send-button {
  display: none;
  z-index: 40;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 0px; /* Passt den Abstand an */
  }

#factoring-message-send-button :hover {
  background-color: var(--secondary-button-color);
}



#message-send-button {
  display: none;
  z-index: 40;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 0px; /* Passt den Abstand an */
  }

#message-send-button :hover {
  background-color: var(--secondary-button-color);
}















/*#instant-answer-button {
  display: block;
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  margin: 10px; 
}*/

/*#instant-answer-button:hover {
  background-color: var(--secondary-button-color);
}*/




#chatbot {
  width: 100%;
  height: 100%;
  max-height: 500px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  z-index: 2; 
  position: relative;
}



/* Stil für den Titel Container */
#title-container {
  flex-direction: row;
  justify-content: space-between; /* Verteilt den Text und das Bild am Rand */
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden; /* Verhindert ungewolltes Scrollen */
  padding: 0px 9px 0px 8px;
  position: relative;
  }




.title-content {
    position: relative;
    width: 70%;
    text-align: left;
}



.title-content .custom0a-p {
  font-family: var(--company-font-family);
  font-weight: bold;
  color: var(--primary-font-color);
  font-size: var(--font-size-title);
  margin-top: 0;
  margin-bottom: 10px;
  margin-left: 0px;
  hyphens: auto;
  word-wrap: break-word;
}


.title-content .custom0b-p {
  font-family: var(--company-font-family);
  color: var(--primary-font-color);
  font-size: var(--font-size-subtitle);
  hyphens: auto;
  word-wrap: break-word;  
  margin-left: 0px;
  line-height: 1.5;
}




#clara-image {
  background-image: var(--clara-image-url);
  background-size: cover; /* Damit das Bild den gesamten Container ausfüllt */
  background-repeat: no-repeat;
  background-position: center;
  width: 20%;
  height: 0; /* Höhe wird durch Padding simuliert */
  padding-bottom: 20%; /* Höhe wird durch das Verhältnis der Breite bestimmt */
  margin-right: 0px;
  margin-top: 5px;
  border-radius: var(--primary-border-radius); /* Abgerundete Ecken */
  overflow: hidden; /* Verhindert, dass das Bild über die abgerundeten Ecken hinaus angezeigt wird */
}









/* Äußerer Container für den Bereich Consent */
#chatbot-consent-container {
  display: block;
  padding: 10px 10px 10px 0px;
  border-bottom: 0px solid var(--primary-border-color);
}




/* Stil für das Einverständnisformular des Chatbots */
#chatbot-consent {
  display: flex;
  align-items: center;
  margin-top: 10px;
  margin-bottom: 10px;
  margin-left: 10px;
}




/* Checkbox */
#chatbot-consent-checkbox {
  margin-left: 0px; /* Verschiebe die Checkbox nach rechts */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border: 2px solid var(--tertiary-border-color);
  background-color: #fff;
  border-radius: 4px;
  outline: none;
  cursor: pointer;
  position: relative;
  box-sizing: border-box; /* Wichtige Einstellung für richtige Breitenberechnung */
  flex-shrink: 0; /* Verhindert, dass die Checkbox durch Flexbox verkleinert wird */
  z-index: 1;
}



#chatbot-consent-checkbox:checked {
  background-color: var(--special-background-color);
  border-color: var(--secondary-border-color);
}

#chatbot-consent-checkbox:checked::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 10px;
  border: solid var(--tertiary-font-color);
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -50%) rotate(45deg);
}



#chatbot-consent label {
  font-family: var(--company-font-family);
  font-size: var(--font-size-finePrint);
  margin-left: 10px;
}




#chatbot-messages {
  position: relative;
  flex-grow: 1;
  overflow-y: auto; /* Ermöglicht Scrollen, wenn Nachrichten den Bereich überlaufen */
  border-bottom: 0px solid var(--primary-border-color); /* aktuell ausgeblendet */
  box-sizing: border-box;
}





/* Übergeordneter Stil für die Suggested Questions */
#suggested-questions {
  padding: 15px 10px 15px 35px;
  border-bottom: 1px solid var(--primary-border-color);
}




.suggested-title {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  font-weight: bold;
  padding: 0px 0px 10px 0px;
  margin: 0px;
}





.suggested-list {
  list-style-type: none;
  padding: 0px;
  margin: 0px;
}





.suggested-question-item {
    display: none;
    /*font-size: var(--font-size-text);
    font-family: var(--company-font-family);
    background-color: var(--secondary-background-color); 
    border: 1px solid var(--primary-border-color);
    padding: 8px 15px;
    border-radius:  var(--primary-border-radius);
    cursor: pointer;
    margin-right: 10px;
    margin-bottom: 10px;
    display: inline-block;
    text-align: center;*/
}





.suggested-question-item:hover {
    background-color: var(--primary-background-color); /* Hintergrund beim Hover in primary background color*/
    border-color: var(--primary-border-color); /* Umrandung beim Hover in primary border color*/
}









/* Stilierung des Bereichs für die eingefügten Fragen und Antworten im Chatbot */
#chatbot-messages-gpt div {
  border-radius: var(--primary-border-radius);
  font-family: var(--company-font-family);
  font-size: var(--font-size-text); /* Schriftgröße für Nachrichten */
  text-align: left;
}



/* Stil für die Nachrichten des Benutzers */
#chatbot-messages-gpt .user-message {
  padding: 10px 20px 15px 35px;
  background-color: var(--primary-background-color);
  color: var(--primary-font-color);
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  font-weight: bold;
  text-align: left;
  margin-top: 15px; /* Kleinere Abstände zwischen den Nachrichten */
}




/* Stil für die Nachrichten des Bots */
#chatbot-messages-gpt .bot-message {
  font-family: var(--company-font-family);
  padding: 5px 20px 15px 35px;
  background-color: var(--primary-background-color);
  text-align: left;
  color: var(--website-standard-font-color-dark);
  margin-top: 0; /* Kleinere Abstände */
  }







/* Special Links */
.special-link-consent {
  color: var(--primary-link-color) !important;
  font-family: var(--company-font-family);
  font-size: var(--font-size-fineprint) !important;
  text-decoration: underline; /* Optional, wenn du möchtest, dass Links unterstrichen sind */
}

.special-link-consent:visited {
  color: var(--secondary-link-color) !important; /* Falls du eine spezifische Farbe für besuchte Links möchtest */
}


/* Stil für den Consent-Text */
#chatbot-consent-label {
  font-family: var(--company-font-family);
  font-size: var(--font-size-fineprint) !important;
}
















/* Special Links */
.special-link {
  color: var(--primary-link-color) !important;
  text-decoration: underline; /* Optional, wenn du möchtest, dass Links unterstrichen sind */
}





.special-link:visited {
  color: var(--secondary-link-color) !important; /* Falls du eine spezifische Farbe für besuchte Links möchtest */
}




/* Überschriften im Chatbot */
.special-heading {
  color: var(--primary-company-color);
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  font-weight: bold;
  margin: 0;
  padding: 0;
}


.special-heading-in-standard-color {
  color: var(--website-standard-font-color-dark);
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  font-weight: bold;
  margin: 0;
  padding: 0;
}




/* Stil für den Chatbot Input Container */
#chatbot-input-container {
  display: flex;
  flex-direction: column;
  height: auto;
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
  background-color: var(--secondary-background-color);
  border-radius: 0px 0px var(--primary-border-radius) var(--primary-border-radius);
  margin-top: 10px;
  z-index: 2;
}





/* Stil für den Chatbot Input Inner Container */
#chatbot-input-inner-container {
  display: flex; /* Flexbox aktivieren */
  justify-content: space-between; /* Teilt den Platz zwischen den Containern auf */
  align-items: center; /* Zentriert die Elemente vertikal */
  width: 100%;
}



/* Stil für das Eingabefeld im Chatbot */
#input-left {
  display: flex;
  height:auto;
  align-items: center; /* Vertikale Zentrierung des Icons */
  justify-content: flex-start; /* Links ausrichten */
  flex-grow: 1;
}



/* Stil für das SVG Icon */
#input-right {
  display: flex; /* Flexbox für das Icon */
  align-items: center; /* Vertikale Zentrierung des Icons */
  justify-content: center; /* Zentrierung innerhalb des Containers */
  width: 30px;
  height: 30px;
  margin-left:10px;
  margin-right: 10px;
  cursor: pointer;    
}







/* Stil für das Eingabefeld im Chatbot */
#chatbot-input {
  flex-grow: 1;
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  padding: 10px 10px 10px 30px;
  border: 2px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  margin-bottom: 0px;
  margin-top: 0px;
  margin-left: 0px;
  margin-right: 0px;
  height: 47px; /* Höhe */
  min-height: 45px; /* Minimale Höhe */
  max-height: 200px; /* Maximale Höhe */
  max-width: 100%;
  overflow: auto;
  box-sizing: border-box;
  position: relative;
  resize: vertical;
  }




/* Stil für den Platzhaltertext im Eingabefeld */
#chatbot-input::placeholder {
  color: var(--secondary-font-color);
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  font-style: italic;
  font-weight: normal;
  padding-left: 0px;
}




/* 
#expand-icon {
  position: absolute;
  bottom: 10px;
  right: 10px; 
  font-size: 20px;
  color: var(--primary-font-color);
  cursor: pointer;
}*/





/* Modal-Dialog korrekt zentrieren und anpassen */
#chatbot-input-modal {
  display: none;
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10 !important;
  width: 80%;
  max-width: 800px;
  height: 60vh;
  background-color: var(--primary-background-color);
  padding: 20px;
  border-radius: var(--primary-border-radius);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  box-sizing: border-box;
  overflow: hidden;
}



/* Modal textarea styling */
#expanded-chatbot-input  {
  width: 100%;
  height: calc(100% - 40px);
  padding: 10px;
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  border: none;
  outline: none;
  background-color: var(--primary-background-color);
  box-sizing: border-box;
  overflow: auto;
  resize: none;
}



/* Mikrofon Button */
#micButton {
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  position: absolute;
  bottom: 20px;
  left: 20px;
  margin-top: 10px;
}



/* Mikrofon-aktiv Styles */
#micButton.active {
  background-color: var(--secondary-company-color);
  color: white;
}




/* OK Button */
#modal-ok-button {
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  position: absolute;
  bottom: 20px;
  right: 20px;
}




#modal-ok-button:hover {
  background-color: var(--secondary-button-color);
}





/* Container für die Button im Eingabebereich */
#input-button-container {
  position: relative;
  bottom: 0;
  justify-content: flex-start; /* Buttons linksbündig platzieren */
  flex-direction: column;
  gap: 0px;
  width: 100%;
  height: auto;
  min-height: fit-content; /* Container passt sich der Höhe des Inhalts an */
  padding: 0px;
  margin-top: 0px;
  z-index: 2;
}



/* Container für die Outlook-Integrations-Button */
#back-to-outlook-container {
  position: fixed;
  bottom: 0px;
  justify-content: center;
  width: 100%;
  height: auto;
  padding: 0px;
  margin-top: 15px;
}





/* Senden Button im Eingabebereich */
#chatbot-send-button {
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 25px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
}





#chatbot-send-button:hover {
  background-color: var(--secondary-button-color);
}



/* Leeren Button im Eingabebereich */
#chatbot-clear-button {
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  margin-left: 10px;
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
}


#chatbot-clear-button:hover {
  background-color: var(--secondary-button-color);
}



/* BackToContactForm Button */
.okAndnotOK-Button {
  width: 100%;
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  margin-top: 15px;
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  z-index: 2;
}


.okAndnotOK-Button:hover {
  background-color: var(--secondary-button-color);
}





/* Hilfe anzeigen Button */
#chatbot-Help-button {
  font-family: var(--company-font-family);
  font-size: var(--font-size-button);
  padding: 10px 20px;
  border: none;
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-button-color);
  color: var(--tertiary-font-color);
  cursor: pointer;
  position: absolute;
  right: 15px;
}


#chatbot-chatbot-Help-button:hover {
  background-color: var(--secondary-button-color);
}




#loader-container {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 100;
  max-width: 80%;
  margin: 0 auto;
  }





#loader {
  margin: 0px;
  padding: 0px;
  border: 8px solid var(--primary-loader-color);
  border-top: 8px solid var(--secondary-loader-color);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 2s linear infinite;
  display: none;
  z-index: 120;
}


#loader-text {
  font-family: var(--company-font-family);
  font-size: var(--primary-font-size);
  color: #fff;
  background-color: var(--primary-company-color);
  border-radius: var(--primary-border-radius);
  display: none; 
  z-index: 120; 
  padding: 10px 20px; 
  text-align: center; 
  max-width: 100%; 
  margin-top: 15px;
}


/* Animation für den loader */
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}



.modal-standard-inner-large-content .custom-h2 {
    padding: 20px 0px 0px 0px;
    /* border-radius: var(--primary-border-radius);*/
    text-align: left;
    font-size: var(--font-size-title);
    color: var(--primary-font-color);
}



.modal-standard-inner-large-content .custom-h3 {
    padding: 20px 0px 0px 0px;
    border-radius: var(--primary-border-radius);
    text-align: left;
    font-size: var(--company-font-size-subtitle);
    font-weight: bold;
    color: var(--secondary-font-color);
}



.modal-standard-inner-large-content p {
    font-size: var(--font-size-text);
    color: var(--website-standard-font-color-dark);
    padding: 0px;
    margin: 0px;
}


.modal-standard-inner-large-content-ul {
    margin-left: 10px;
    padding-right: 10px;
}



.modal-standard-inner-large-content li {
    font-size: var(--font-size-subtitle);
    color: var(--website-standard-font-color-dark);
    margin-bottom: 10px;
    line-height: 1.5;
    list-style-type: disc; /* Stellt sicher, dass Aufzählungspunkte erhalten bleiben */
    padding-left: 0px;

}



.modal-standard-content p {
    color: var(--secondary-font-color);
    text-align: center;
    padding:  0px;
    margin: 0px; 
    width: 80%;
    display: block; 
    font-size: var(--company-font-size-text);
    font-family: var(--company-font-family);
    font-weight: 500;
}



/* Standard-Modaldialog Hintergrund für große Dialoge */
.modal-standard-background-large {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 11;
  pointer-events: none;
  display: flex;
}


/* iOS-spezifische Anpassung für modal-standard-background-large */
@supports (-webkit-touch-callout: none) {
  .modal-standard-background-large {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 11;
  pointer-events: none;
  display: none;
  }
}


/* Standard-Modaldialog für große Dialoge */
.modal-standard-inner-large {
    z-index: 100000 !important;
    display: flex !important;
    position: fixed !important;
    background-color: var(--primary-background-color) !important;
    left: 50% !important;
    top: 50% !important;
    width: 90vw !important;
    max-width: 800px !important;
    height: auto !important;
    max-height: 75vh !important;
    transform: translate(-50%, -50%) !important;
    pointer-events: auto !important; 
    box-sizing: border-box !important;
    border: 2px solid var(--primary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
    flex-direction: column !important;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important; 
    overflow: hidden !important; 
}



.modal-standard-inner-large-content {
    flex: 1; 
    box-sizing: border-box;
    overflow-y: auto;
    padding: 20px;
    height: auto;
    position: relative;
    width: 100%;
    text-align: left;
    margin-bottom: 20px;
    border: 0px solid var(--primary-border-color);
    border-radius: var(--primary-border-radius);
}





.modal-standard-inner-large-content .email-nachricht {
  font-family: var(--company-font-family);
  font-size: var(--font-size-text);
  color: var(--primary-font-color);
  font-weight: normal;
  padding: 10px 10px 10px 30px;
  border: 0px solid var(--tertiary-border-color);
  border-radius: var(--primary-border-radius);
  background-color: var(--primary-background-color);
  margin-bottom: 10px;
  margin-top: 10px;
  margin-left: 0px;
  margin-right: 10px;
  width: 100%;
  resize: none;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden;
  white-space: normal;
  max-height: calc(1.5em * 6 + 20px);
}





.icon {
    width: 40px;   
    height: 40px;  
    stroke: var(--primary-company-color);
    stroke-width: 1.5;
    fill: none;
    cursor: pointer; 
    transition: all 0.3s ease; 
}


.icon.hover-scale:hover {
    transform: scale(1.2);   
    stroke: var(--secondary-font-color);
}



.icon2 {
    width: 24px;
    height: 24px;
    stroke: var(--primary-font-color);
    fill: none;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-left: 10px;
}


.icon2.hover-scale:hover {
    transform: scale(1.2);
    stroke: var(--secondary-font-color);
}


.icon3 {
    width: 25px;
    height: 25px;
    stroke: var(--primary-font-color);
    fill: none;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-left: 10px;
}


.icon3.hover-scale:hover {
    transform: scale(1.2);
    stroke: var(--secondary-font-color);
}

.icon4 {
    width: 26px;
    height: 26px;
    stroke: var(--primary-font-color);
    fill: none;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-left: 10px;
}


.icon4.hover-scale:hover {
    transform: scale(1.2);
    stroke: var(--secondary-font-color);
}





/* Standard-Modaldialog Hintergrund */
.modal-standard-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 11;
  pointer-events: none;
  display: none;
}


/* iOS-spezifische Anpassung für modal-standard-background */
@supports (-webkit-touch-callout: none) {
  .modal-standard-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 11;
  pointer-events: none;
  display: none;
  }
}



.modal-standard-inner {
    z-index: 100000 !important;
    display: block !important;
    position: fixed !important;
    background-color: var(--primary-background-color) !important;
    left: 50% !important;
    top: 50% !important;
    width: fit-content; /* Breite passt sich dem Inhalt an */
    height: fit-content; /* Höhe passt sich dem Inhalt an */
    max-width: 90vw !important;
    max-height: 75vh !important;
    transform: translate(-50%, -50%) !important;
    pointer-events: auto !important; 
    box-sizing: border-box !important;
    border: 2px solid var(--primary-border-color) !important;
    border-radius: var(--primary-border-radius) !important;
    flex-direction: column !important;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important; 
}


/* Standard-Modaldialog Contentbereich */
.modal-standard-content  {
    display: flex;
    flex-direction: column;
    position: relative;
    align-items: center;
    text-align: center; 
    flex: 1; 
    overflow: none;
    padding: 50px 0px 50px 0px;
    margin: 0px;
    height: none;
    max-height:50vh;
    width: 100%;
    color: var(--secondary-font-color);
    z-index: 100001 !important;
}


/* Standard-Modaldialog Buttonbereich */
.modal-standard-button-container  {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 0px;
    height: auto;
    padding: 24px 30px 20px 30px;
    background-color: var(--secondary-background-color);
    box-sizing: border-box;
    border-top: 0px solid var(--tertiary-border-color);
}


.modal-standard-button {
    font-family: var(--company-font-family);
    font-size: var(--font-size-button);
    padding: 10px 20px;
    border: none;
    border-radius: var(--primary-border-radius);
    background-color: var(--primary-button-color);
    color: var(--tertiary-font-color);
    cursor: pointer;
    min-width: 150px;
    text-align: center;
}


.modal-standard-button:hover {
    background-color: var(--secondary-button-color);
}


/* verhindert, dass Felder mit autofill einen automatischen Background bekommen */
input:-webkit-autofill,
textarea:-webkit-autofill {
  background-color: var(--primary-background-color) !important;
  color: var(--primary-background-color) !important;
}



#section-container {
  padding: 0;
  margin: 0;
  }


.collapsible-container {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height 0.5s ease;
}


.collapsed {
    max-height: 0 !important;
    min-width: 0 !important;
    height: 0 !important;
    padding: 0;
    margin: 0;
    border: none;
    overflow: hidden;
    box-sizing: border-box; 
}


#open-close-button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.arrow-button {
    width: 30px;
    height: 30px;
    background: transparent;
    border: none;
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.arrow-button::before {
    content: '';
    border: solid var(--primary-font-color);
    border-width: 0 3px 3px 0;
    display: inline-block;
    padding: 5px;
    transform: rotate(45deg);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(45deg);
}



.suggestion-box-container {
    position: relative;  
    width: 100%;
    overflow: visible;
    margin-top: 0px;
    box-sizing: border-box;
    z-index: 99999;
    margin-bottom: 20px;
    margin-top: 0px;
    background-color: var(--primary-background-color);
}




.suggestion-box {
    position: absolute;  
    width: 100%;
    height: auto;
    max-height: calc(300px - 2px);
    overflow-y: auto;
    scrollbar-gutter: stable;
    list-style-type: none;
    z-index: 10000;
    padding-bottom: 2px;
    display: block;
    box-sizing: border-box;
    margin-bottom: 20px;
}

.suggestion-item {
    padding: 10px 10px 10px 30px;
    cursor: pointer;
    border-bottom: 1px solid #ddd;
    list-style-type: none;
    background-color: var(--company-logo-background);
    border-radius: var(--primary-border-radius);
    margin-bottom: 2px;
    box-sizing: border-box;

}

.suggestion-item:hover {
    background-color: var(--special-background-color);
    color: var(--tertiary-font-color);
    border-radius: var(--primary-border-radius);
}

.no-result {
    padding: 10px;
    color: var(--secondary-font-color);
    text-align: left;
    list-style-type: none;
    padding-left: 30px;
}




</style>
</head>



<body>

  
  <div id="delete-confirmation-modal" class="modal-standard-background" aria-modal="true">

    <div class="modal-standard-inner">

      <div class="modal-standard-content">
        <p id="chat-history-deleted" class="modal-standard-content p">Ihre Chat-Historie wird gelöscht.</p>
      </div>

      <div class="modal-standard-button-container">
        <button id="cancel2-button" class="modal-standard-button" onclick="closeDeleteConfirmation()">Abbrechen</button>
        <button id="confirm-delete-button" class="modal-standard-button" onclick="confirmDelete()">OK</button>
      </div>

    </div>

  </div>      


  <div id="delete-history-and-close-chatbot-background" class="modal-standard-background" aria-modal="true">

    <div class="modal-standard-inner">

      <div class="modal-standard-content">
        <p id="chat-history-deleted-and-closed" class="modal-standard-content p">Ihre Chat-Historie wird gelöscht und der Chatbot geschlossen.</p>
      </div>

      <div class="modal-standard-button-container">
        <button id="cancel-button" class="modal-standard-button" onclick="closeDeleteConfirmation()">Abbrechen</button>
        <button id="confirm-delete-button2" class="modal-standard-button" onclick="confirmDelete2()">OK</button>
      </div>

    </div>

  </div>


  <div id="delete-confirmation-modal3" class="modal-standard-background" aria-modal="true">

    <div class="modal-standard-inner">

      <div class="modal-standard-content">
        <p id="resetPageText1" class="modal-standard-content p">Wir freuen uns, dass wir Ihnen mit diesem Service helfen konnten.<br><br>Ihre Chat-Historie wird gelöscht und die Nachricht verworfen.</p>
      </div>

      <div class="modal-standard-button-container">
        <button id="cancel-button3" class="modal-standard-button" onclick="closeDeleteConfirmation()">Abbrechen</button>
        <button id="confirm-delete-button3" class="modal-standard-button" onclick="resetPage()">OK</button>
      </div>

    </div>

  </div>       



  <div id="confirmModal" class="modal-standard-background-large" aria-modal="true" style="display:none">

    <div class="modal-standard-inner-large">

      <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Die folgende Nachricht wird gesendet.</h2>
        <p><strong>an:</strong><br>
        <span id="recipientName"></span><br>
        <span id="recipientEmail"></span></p><br>
        <p><strong>Betreff:</strong><br>
          <span id="modalRechnungssteller"></span><br>
          <span id="modalRechnungsnummer"></span></p><br>
          <span id="modalAktennummer"></span></p><br>
        <p><strong>Ihr Name:</strong><br>
        <span id="modalName"></span></p><br>
        <p><strong>Ihre E-Mail-Adresse:</strong><br>
        <span id="modalEmail"></span></p><br>
        <p><strong>Ihre Nachricht:</strong></p>
        <textarea id="modalMessage" class="email-nachricht" style="white-space:pre-wrap" name="Nachricht" rows="4" placeholder="Ihr Anliegen / Ihre Nachricht" maxlength="2000"></textarea>
        <p><strong><br>Übersetzte Chat-Historie:</strong></p><br>
        <div id="translated-chat-history" style="white-space:pre-wrap">
        </div>
      </div>

      <div id="modal-standard-button-container" class="modal-standard-button-container">
        <button id="cancelSend" class="modal-standard-button">Abbrechen</button>
        <button id="confirmSend" class="modal-standard-button">Senden</button>
      </div>

    </div>

  </div>


  <div id="confirm2Modal" class="modal-standard-background-large" aria-modal="true" style="display:none">

    <div class="modal-standard-inner-large">
  
      <div class="modal-standard-inner-large-content">
  
        <h2 class="custom-h2" style="text-align:center;padding:20px;margin:0px">Ihre Nachricht wurde erfolgreich gesendet!</h2>
  
      </div>
  
    </div>
  
  </div>






















<div id="user-help-container-de" class="modal-standard-background-large" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
      
      <div class="modal-standard-inner-large-content">
      
        <h2 class="custom-h2">Ich bin Chati, Ihr persönlicher Chat-Assistant und ich möchte Ihnen weiterhelfen. Und zwar sofort.</h2>
        <p class="modal-standard-inner-large-content p">Kennen Sie das? Sie schreiben eine Nachricht über ein Kontaktformular und müssen darauf warten, dass jemand auf Ihr Anliegen antwortet.  Mit mir ist das anders: In den allermeisten Fällen gebe ich Ihnen direkt eine Antwort auf Ihre Fragen – ohne Wartezeit!</p>

        <h3 class="custom-h3">Wie können wir miteinander kommunizieren?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Sofortantwort:</strong> Geben Sie Ihre Frage in das Textfeld am unteren Rand ein. Tippen Sie auf das Pfeilsymbol und ich schreibe Ihnen sofort zurück. Alternativ können Sie ein Thema aus der Liste auswählen. </li>
            <li><strong>Sprachauswahl:</strong> Wählen Sie Ihre bevorzugte Sprache im Dropdown-Menü. Ich antworte dann in der von Ihnen gewählten Sprache.</li>
            <li><strong>Chat-Historie:</strong> Unsere Konversation wird solange gespeichert, wie Sie auf dieser Seite verbleiben. Über das Papierkorb-Symbol können Sie den Verlauf sofort löschen.</li>
        </ul>

        <h3 class="custom-h3">Welche Funktionen finden Sie hier?</h3>
        <ul class="modal-standard-inner-large-content-ul">

            <li><strong>Sprache auswählen:</strong> Wählen Sie die von Ihnen gewünschte Konversationssprache über die Sprachauswahl neben dem Flaggensymbol.</li>
            <li><strong>Thema auswählen:</strong> Die häufigsten Themen können Sie über die Themenliste direkt auswählen. Die erste Frage wird so direkt für Sie an mich geschickt.</li>
            <li><strong>Hilfe anzeigen:</strong> Das Symbol mit dem Fragezeichen zeigt diese Hilfeseite an.</li>
            <li><strong>Konversation löschen:</strong> Unsere Konversation wird solange gespeichert, wie Sie auf dieser Seite verbleiben. Über das Papierkorb-Symbol können Sie den Verlauf sofort löschen.</li>
            <li><strong>Chat schließen:</strong> Das Schließen-Symbol "x" löscht unsere Konversation und bringt Sie zurück zum Kontaktformular. Ihre Eingaben dort sind noch vorhanden, so dass Sie diese per E-Mail an unser Support-Team senden können.</li>
            <li><strong>Sofortantwort erhalten:</strong> Übertragen Sie Ihre Nachricht aus dem Kontaktformular zu mir und erhalten Sie sofort eine Antwort.</li>
            <li><strong>Frage senden:</strong> Das Symbol mit dem Pfeil neben dem Eingabefeld sendet Ihre Frage an mich. Warten Sie bitte einen kleinen Augenblick, damit ich eine Antwort formulieren kann.</li>
            <li><strong>Dialog schließen:</strong> Schließen Sie den gesamten Dialog mit mir und kehren Sie zum Kontaktformular zurück. Alle Eingaben von Ihnen und unsere Konversation werden gelöscht.</li>
            <li><strong>E-Mail senden:</strong> Senden Sie Ihre Daten aus dem Kontaktformular und unsere Konversation an das Support-Team. Sollte unsere Konversation in einer anderen Sprache stattgefunden haben, wird diese vorher ins Deutsche übersetzt, damit unser Support-Team das Anliegen besser versteht.</li>

          </ul>
      
      </div>

      <div class="modal-standard-button-container">
          <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Deutsch')">OK</button>
      </div>
      
  </div>
    
</div>



<div id="user-help-container-en" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">I am Chati, your personal chat assistant, and I want to help you. Right away.</h2>
        <p class="modal-standard-inner-large-content p"> Do you know this? You write a message via a contact form and have to wait for someone to respond to your request. With me, it's different: in most cases, I give you an immediate answer to your questions – no waiting time!</p>

        <h3 class="custom-h3">How can we communicate with each other?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Instant reply:</strong> Enter your question in the text field at the bottom. Tap the arrow icon, and I will respond to you immediately. Alternatively, you can select a topic from the list.</li>
            <li><strong>Language selection:</strong> Choose your preferred language from the dropdown menu. I will respond in the language you select.</li>
            <li><strong>Chat history:</strong> Our conversation is saved as long as you stay on this page. You can delete the history immediately using the trash icon.</li>
        </ul>

        <h3 class="custom-h3">What functions are available here?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Select language:</strong> Choose the language you want to converse in using the language selection next to the flag icon.</li>
            <li><strong>Select topic:</strong> The most common topics can be directly selected from the topic list. The first question will be sent to me directly.</li>
            <li><strong>Show help:</strong> The question mark icon displays this help page.</li>
            <li><strong>Delete conversation:</strong> Our conversation is saved as long as you stay on this page. You can delete the history immediately using the trash icon.</li>
            <li><strong>Close chat:</strong> The close icon "x" deletes our conversation and takes you back to the contact form. Your inputs there are still available, so you can send them via email to our support team.</li>
            <li><strong>Get an instant reply:</strong> Transfer your message from the contact form to me and receive an immediate reply.</li>
            <li><strong>Send question:</strong> The arrow icon next to the input field sends your question to me. Please wait a moment while I formulate an answer.</li>
            <li><strong>Close dialog:</strong> Close the entire dialog with me and return to the contact form. All your inputs and our conversation will be deleted.</li>
            <li><strong>Send email:</strong> Send your data from the contact form and our conversation to the support team. If our conversation took place in another language, it will first be translated into German to help the support team understand your request better.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Englisch')">OK</button>
    </div>
    
  </div>

</div>




<div id="user-help-container-es" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Soy Chati, tu asistente personal de chat, y quiero ayudarte. Ahora mismo.</h2>
        <p class="modal-standard-inner-large-content p"> ¿Te ha pasado? Escribes un mensaje a través de un formulario de contacto y tienes que esperar a que alguien responda a tu solicitud. Conmigo es diferente: en la mayoría de los casos, te doy una respuesta inmediata a tus preguntas, sin tiempo de espera.</p>

        <h3 class="custom-h3">¿Cómo podemos comunicarnos?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Respuesta instantánea:</strong> Escribe tu pregunta en el campo de texto en la parte inferior. Pulsa el ícono de flecha y te responderé de inmediato. Alternativamente, puedes seleccionar un tema de la lista.</li>
            <li><strong>Selección de idioma:</strong> Elige tu idioma preferido en el menú desplegable. Responderé en el idioma que selecciones.</li>
            <li><strong>Historial de chat:</strong> Nuestra conversación se guarda mientras permanezcas en esta página. Puedes borrar el historial inmediatamente usando el ícono de papelera.</li>
        </ul>

        <h3 class="custom-h3">¿Qué funciones están disponibles aquí?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Seleccionar idioma:</strong> Elige el idioma en el que deseas conversar utilizando la selección de idioma junto al ícono de la bandera.</li>
            <li><strong>Seleccionar tema:</strong> Los temas más comunes se pueden seleccionar directamente desde la lista de temas. La primera pregunta se enviará directamente a mí.</li>
            <li><strong>Mostrar ayuda:</strong> El ícono con el signo de interrogación muestra esta página de ayuda.</li>
            <li><strong>Borrar conversación:</strong> Nuestra conversación se guarda mientras permanezcas en esta página. Puedes borrar el historial inmediatamente usando el ícono de papelera.</li>
            <li><strong>Cerrar chat:</strong> El ícono de cerrar "x" elimina nuestra conversación y te lleva de vuelta al formulario de contacto. Tus datos allí permanecerán disponibles para que los envíes por correo electrónico a nuestro equipo de soporte.</li>
            <li><strong>Obtener una respuesta instantánea:</strong> Transfiere tu mensaje desde el formulario de contacto a mí y recibe una respuesta inmediata.</li>
            <li><strong>Enviar pregunta:</strong> El ícono de flecha junto al campo de entrada envía tu pregunta a mí. Por favor, espera un momento mientras formulo una respuesta.</li>
            <li><strong>Cerrar diálogo:</strong> Cierra todo el diálogo conmigo y regresa al formulario de contacto. Todos tus datos y nuestra conversación serán eliminados.</li>
            <li><strong>Enviar correo electrónico:</strong> Envía tus datos desde el formulario de contacto y nuestra conversación al equipo de soporte. Si nuestra conversación se realizó en otro idioma, primero se traducirá al alemán para que el equipo de soporte comprenda mejor tu solicitud.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Spanisch')">OK</button>
    </div>
    
  </div>

</div>




<div id="user-help-container-tr" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Ben Chati, kişisel sohbet asistanınızım ve size hemen yardımcı olmak istiyorum.</h2>
        <p class="modal-standard-inner-large-content p"> Bu durumu biliyor musunuz? Bir iletişim formu üzerinden mesaj yazıyorsunuz ve birinin talebinize yanıt vermesini beklemek zorunda kalıyorsunuz. Benimle bu farklı: Çoğu durumda sorularınıza anında cevap veriyorum – bekleme süresi olmadan!</p>

        <h3 class="custom-h3">Nasıl iletişim kurabiliriz?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Anında cevap:</strong> Sorunuzu alt kısımdaki metin alanına yazın. Ok simgesine dokunun ve size hemen yanıt vereceğim. Alternatif olarak, listeden bir konu seçebilirsiniz.</li>
            <li><strong>Dil seçimi:</strong> Açılır menüden tercih ettiğiniz dili seçin. Seçtiğiniz dilde yanıt vereceğim.</li>
            <li><strong>Sohbet geçmişi:</strong> Sohbetimiz bu sayfada kaldığınız sürece kaydedilir. Çöp kutusu simgesini kullanarak geçmişi hemen silebilirsiniz.</li>
        </ul>

        <h3 class="custom-h3">Burada hangi işlevleri bulabilirsiniz?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Dil seçimi:</strong> Bayrak simgesinin yanındaki dil seçeneğini kullanarak konuşma yapmak istediğiniz dili seçin.</li>
            <li><strong>Konu seçimi:</strong> En sık karşılaşılan konular liste üzerinden doğrudan seçilebilir. İlk soru doğrudan bana gönderilir.</li>
            <li><strong>Yardımı göster:</strong> Soru işareti simgesi bu yardım sayfasını gösterir.</li>
            <li><strong>Sohbeti sil:</strong> Sohbetimiz bu sayfada kaldığınız sürece kaydedilir. Çöp kutusu simgesini kullanarak geçmişi hemen silebilirsiniz.</li>
            <li><strong>Sohbeti kapat:</strong> Kapatma simgesi "x" sohbetimizi siler ve sizi iletişim formuna geri götürür. Oradaki girdileriniz hâlâ mevcut olup, bunları destek ekibimize e-posta ile gönderebilirsiniz.</li>
            <li><strong>Anında cevap alın:</strong> Mesajınızı iletişim formundan bana aktarın ve hemen bir yanıt alın.</li>
            <li><strong>Soru gönder:</strong> Giriş alanının yanındaki ok simgesi sorularınızı bana gönderir. Bir yanıt hazırlamam için lütfen bir an bekleyin.</li>
            <li><strong>Diyaloğu kapat:</strong> Benimle olan tüm diyaloğu kapatın ve iletişim formuna geri dönün. Tüm girdileriniz ve sohbetimiz silinecektir.</li>
            <li><strong>E-posta gönder:</strong> İletişim formundan verilerinizi ve sohbetimizi destek ekibine gönderin. Sohbetimiz başka bir dilde gerçekleştiyse, bu önce Almanca'ya çevrilecektir, böylece destek ekibi isteğinizi daha iyi anlayabilir.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Türkisch')">OK</button>
    </div>
    
  </div>

</div>


<div id="user-help-container-sa" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">أنا شاتي، مساعد الدردشة الشخصي الخاص بك، وأرغب في مساعدتك. على الفور.</h2>
        <p class="modal-standard-inner-large-content p"> هل تعرف هذا؟ تقوم بكتابة رسالة عبر نموذج الاتصال وتضطر إلى الانتظار حتى يرد شخص ما على طلبك. معي الأمر مختلف: في معظم الحالات، سأعطيك إجابة فورية على أسئلتك – بدون وقت انتظار!</p>

        <h3 class="custom-h3">كيف يمكننا التواصل معًا؟</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>إجابة فورية:</strong> أدخل سؤالك في حقل النص في الأسفل. اضغط على أيقونة السهم وسأرد عليك فورًا. أو يمكنك اختيار موضوع من القائمة.</li>
            <li><strong>اختيار اللغة:</strong> اختر لغتك المفضلة من القائمة المنسدلة. سأجيبك باللغة التي اخترتها.</li>
            <li><strong>تاريخ المحادثة:</strong> يتم حفظ محادثتنا طالما أنك تبقى على هذه الصفحة. يمكنك حذف السجل فورًا باستخدام أيقونة سلة المهملات.</li>
        </ul>

        <h3 class="custom-h3">ما هي الوظائف المتاحة هنا؟</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>اختيار اللغة:</strong> اختر اللغة التي تريد التحدث بها باستخدام اختيار اللغة بجانب أيقونة العلم.</li>
            <li><strong>اختيار الموضوع:</strong> يمكن اختيار الموضوعات الأكثر شيوعًا مباشرة من قائمة الموضوعات. سيتم إرسال السؤال الأول إلي مباشرة.</li>
            <li><strong>عرض المساعدة:</strong> تعرض أيقونة علامة الاستفهام صفحة المساعدة هذه.</li>
            <li><strong>حذف المحادثة:</strong> يتم حفظ محادثتنا طالما أنك تبقى على هذه الصفحة. يمكنك حذف السجل فورًا باستخدام أيقونة سلة المهملات.</li>
            <li><strong>إغلاق الدردشة:</strong> يؤدي رمز الإغلاق "x" إلى حذف محادثتنا وإعادتك إلى نموذج الاتصال. لا تزال إدخالاتك هناك متاحة لإرسالها عبر البريد الإلكتروني إلى فريق الدعم الخاص بنا.</li>
            <li><strong>الحصول على إجابة فورية:</strong> انقل رسالتك من نموذج الاتصال إلى وسأرد عليك على الفور.</li>
            <li><strong>إرسال السؤال:</strong> ترسل أيقونة السهم بجانب حقل الإدخال سؤالك لي. يرجى الانتظار لحظة أثناء صياغة الرد.</li>
            <li><strong>إغلاق الحوار:</strong> أغلق الحوار بالكامل معي وعد إلى نموذج الاتصال. سيتم حذف جميع إدخالاتك ومحادثتنا.</li>
            <li><strong>إرسال بريد إلكتروني:</strong> أرسل بياناتك من نموذج الاتصال ومحادثتنا إلى فريق الدعم. إذا جرت محادثتنا بلغة أخرى، فسيتم ترجمتها أولاً إلى اللغة الألمانية لتسهيل فهم فريق الدعم لطلبك.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Arabisch')">OK</button>
    </div>
    
  </div>

</div>


<div id="user-help-container-ru" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Я Чати, ваш личный чат-ассистент, и я хочу вам помочь. Прямо сейчас.</h2>
        <p class="modal-standard-inner-large-content p"> Знакома ли вам эта ситуация? Вы пишете сообщение через контактную форму и вынуждены ждать, пока кто-то ответит на ваш запрос. Со мной все иначе: в большинстве случаев я сразу же дам вам ответ на ваши вопросы – без ожидания!</p>

        <h3 class="custom-h3">Как мы можем общаться?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Мгновенный ответ:</strong> Введите ваш вопрос в текстовое поле внизу. Нажмите на значок стрелки, и я сразу же отвечу. Либо вы можете выбрать тему из списка.</li>
            <li><strong>Выбор языка:</strong> Выберите предпочитаемый язык в выпадающем меню. Я отвечу на выбранном вами языке.</li>
            <li><strong>История чата:</strong> Наш диалог сохраняется, пока вы находитесь на этой странице. Вы можете сразу удалить историю, нажав на значок корзины.</li>
        </ul>

        <h3 class="custom-h3">Какие функции доступны здесь?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Выбор языка:</strong> Выберите язык общения через меню выбора языка рядом с иконкой флага.</li>
            <li><strong>Выбор темы:</strong> Наиболее распространенные темы можно выбрать прямо из списка. Первый вопрос будет отправлен мне сразу же.</li>
            <li><strong>Показать помощь:</strong> Значок с вопросительным знаком отображает эту страницу помощи.</li>
            <li><strong>Удалить диалог:</strong> Наш диалог сохраняется, пока вы находитесь на этой странице. Вы можете удалить историю, нажав на значок корзины.</li>
            <li><strong>Закрыть чат:</strong> Значок закрытия "x" удаляет наш диалог и возвращает вас к контактной форме. Ваши записи там останутся, чтобы вы могли отправить их по электронной почте в нашу службу поддержки.</li>
            <li><strong>Получить мгновенный ответ:</strong> Передайте ваше сообщение из контактной формы мне и получите немедленный ответ.</li>
            <li><strong>Отправить вопрос:</strong> Значок стрелки рядом с полем ввода отправляет ваш вопрос мне. Пожалуйста, подождите немного, пока я формулирую ответ.</li>
            <li><strong>Закрыть диалог:</strong> Закройте весь диалог со мной и вернитесь к контактной форме. Все ваши записи и наш диалог будут удалены.</li>
            <li><strong>Отправить электронное письмо:</strong> Отправьте ваши данные из контактной формы и наш диалог в службу поддержки. Если наш диалог был на другом языке, он сначала будет переведен на немецкий, чтобы наша служба поддержки лучше поняла ваш запрос.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Russisch')">OK</button>
    </div>
    
  </div>

</div>


<div id="user-help-container-pl" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Jestem Chati, twoim osobistym asystentem czatu i chcę Ci pomóc. Od razu.</h2>
        <p class="modal-standard-inner-large-content p"> Znasz to? Piszesz wiadomość przez formularz kontaktowy i musisz czekać na odpowiedź na swoje zapytanie. Ze mną jest inaczej: w większości przypadków natychmiast odpowiadam na Twoje pytania – bez czekania!</p>

        <h3 class="custom-h3">Jak możemy się komunikować?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Natychmiastowa odpowiedź:</strong> Wpisz swoje pytanie w polu tekstowym na dole. Naciśnij ikonę strzałki, a ja natychmiast odpowiem. Alternatywnie możesz wybrać temat z listy.</li>
            <li><strong>Wybór języka:</strong> Wybierz preferowany język z menu rozwijanego. Odpowiem w wybranym przez Ciebie języku.</li>
            <li><strong>Historia czatu:</strong> Nasza rozmowa jest zapisywana, dopóki pozostajesz na tej stronie. Możesz natychmiast usunąć historię, korzystając z ikony kosza.</li>
        </ul>

        <h3 class="custom-h3">Jakie funkcje są tutaj dostępne?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Wybierz język:</strong> Wybierz język, w którym chcesz rozmawiać, za pomocą wyboru języka obok ikony flagi.</li>
            <li><strong>Wybierz temat:</strong> Najczęstsze tematy można wybrać bezpośrednio z listy tematów. Pierwsze pytanie zostanie wysłane bezpośrednio do mnie.</li>
            <li><strong>Pokaż pomoc:</strong> Ikona znaku zapytania wyświetla tę stronę pomocy.</li>
            <li><strong>Usuń rozmowę:</strong> Nasza rozmowa jest zapisywana, dopóki pozostajesz na tej stronie. Możesz natychmiast usunąć historię, korzystając z ikony kosza.</li>
            <li><strong>Zamknij czat:</strong> Ikona zamknięcia "x" usuwa naszą rozmowę i przenosi Cię z powrotem do formularza kontaktowego. Twoje wpisy tam nadal będą dostępne, abyś mógł je wysłać e-mailem do naszego zespołu wsparcia.</li>
            <li><strong>Otrzymaj natychmiastową odpowiedź:</strong> Prześlij swoją wiadomość z formularza kontaktowego do mnie i otrzymaj natychmiastową odpowiedź.</li>
            <li><strong>Wyślij pytanie:</strong> Ikona strzałki obok pola wprowadzania wysyła Twoje pytanie do mnie. Proszę chwilę poczekać, aż sformułuję odpowiedź.</li>
            <li><strong>Zamknij dialog:</strong> Zamknij całą rozmowę ze mną i wróć do formularza kontaktowego. Wszystkie Twoje wpisy i nasza rozmowa zostaną usunięte.</li>
            <li><strong>Wyślij e-mail:</strong> Wyślij swoje dane z formularza kontaktowego i naszą rozmowę do zespołu wsparcia. Jeśli nasza rozmowa odbywała się w innym języku, najpierw zostanie przetłumaczona na niemiecki, aby nasz zespół wsparcia mógł lepiej zrozumieć Twoje zapytanie.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Polnisch')">OK</button>
    </div>
    
  </div>

</div>



<div id="user-help-container-ro" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Sunt Chati, asistentul tău personal de chat și vreau să te ajut. Imediat.</h2>
        <p class="modal-standard-inner-large-content p"> Cunoști această situație? Scrii un mesaj printr-un formular de contact și trebuie să aștepți ca cineva să răspundă la solicitarea ta. Cu mine este diferit: în cele mai multe cazuri, îți dau un răspuns imediat la întrebările tale – fără timp de așteptare!</p>

        <h3 class="custom-h3">Cum putem comunica?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Răspuns instantaneu:</strong> Introdu întrebarea ta în câmpul de text din partea de jos. Apasă pe pictograma săgeată și îți voi răspunde imediat. Alternativ, poți selecta un subiect din listă.</li>
            <li><strong>Selecție limbă:</strong> Alege limba preferată din meniul derulant. Voi răspunde în limba pe care o alegi.</li>
            <li><strong>Istoric chat:</strong> Conversația noastră este salvată atât timp cât rămâi pe această pagină. Poți șterge istoricul imediat utilizând pictograma coșului de gunoi.</li>
        </ul>

        <h3 class="custom-h3">Ce funcții sunt disponibile aici?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Selectează limba:</strong> Alege limba în care dorești să conversezi utilizând selecția de limbă de lângă pictograma steagului.</li>
            <li><strong>Selectează subiectul:</strong> Cele mai frecvente subiecte pot fi selectate direct din lista de subiecte. Prima întrebare va fi trimisă direct către mine.</li>
            <li><strong>Afișează ajutor:</strong> Pictograma cu semnul întrebării afișează această pagină de ajutor.</li>
            <li><strong>Șterge conversația:</strong> Conversația noastră este salvată atât timp cât rămâi pe această pagină. Poți șterge istoricul imediat utilizând pictograma coșului de gunoi.</li>
            <li><strong>Închide chat-ul:</strong> Pictograma de închidere "x" șterge conversația noastră și te duce înapoi la formularul de contact. Datele tale rămân acolo, astfel încât să le poți trimite prin e-mail echipei noastre de suport.</li>
            <li><strong>Primește un răspuns imediat:</strong> Transferă mesajul tău din formularul de contact către mine și primește un răspuns imediat.</li>
            <li><strong>Trimite întrebarea:</strong> Pictograma săgeată de lângă câmpul de introducere trimite întrebarea ta către mine. Te rog să aștepți un moment până formulez un răspuns.</li>
            <li><strong>Închide dialogul:</strong> Închide întreaga conversație cu mine și revino la formularul de contact. Toate datele tale și conversația noastră vor fi șterse.</li>
            <li><strong>Trimite un e-mail:</strong> Trimite datele tale din formularul de contact și conversația noastră către echipa de suport. Dacă conversația noastră a avut loc într-o altă limbă, aceasta va fi tradusă mai întâi în germană, pentru ca echipa de suport să înțeleagă mai bine solicitarea ta.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Rumänisch')">OK</button>
    </div>
    
  </div>

</div>



<div id="user-help-container-gr" class="send-confirmation" aria-modal="true" style="display:none">


  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Είμαι η Chati, η προσωπική σας βοηθός συνομιλίας και θέλω να σας βοηθήσω. Αμέσως.</h2>
        <p class="modal-standard-inner-large-content p"> Σας έχει συμβεί; Γράφετε ένα μήνυμα μέσω μιας φόρμας επικοινωνίας και πρέπει να περιμένετε να απαντήσει κάποιος στο αίτημά σας. Με εμένα είναι διαφορετικά: στις περισσότερες περιπτώσεις, σας δίνω άμεση απάντηση στις ερωτήσεις σας – χωρίς αναμονή!</p>

        <h3 class="custom-h3">Πώς μπορούμε να επικοινωνήσουμε;</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Άμεση απάντηση:</strong> Εισάγετε την ερώτησή σας στο πεδίο κειμένου στο κάτω μέρος. Πατήστε το εικονίδιο με το βέλος και θα σας απαντήσω αμέσως. Εναλλακτικά, μπορείτε να επιλέξετε ένα θέμα από τη λίστα.</li>
            <li><strong>Επιλογή γλώσσας:</strong> Επιλέξτε τη γλώσσα που προτιμάτε από το αναπτυσσόμενο μενού. Θα απαντήσω στη γλώσσα που επιλέγετε.</li>
            <li><strong>Ιστορικό συνομιλίας:</strong> Η συνομιλία μας αποθηκεύεται όσο παραμένετε σε αυτή τη σελίδα. Μπορείτε να διαγράψετε το ιστορικό αμέσως χρησιμοποιώντας το εικονίδιο του κάδου απορριμμάτων.</li>
        </ul>

        <h3 class="custom-h3">Τι λειτουργίες είναι διαθέσιμες εδώ;</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Επιλογή γλώσσας:</strong> Επιλέξτε τη γλώσσα στην οποία θέλετε να συνομιλήσετε χρησιμοποιώντας την επιλογή γλώσσας δίπλα στο εικονίδιο της σημαίας.</li>
            <li><strong>Επιλογή θέματος:</strong> Τα πιο συχνά θέματα μπορούν να επιλεγούν απευθείας από τη λίστα θεμάτων. Η πρώτη ερώτηση θα σταλεί απευθείας σε εμένα.</li>
            <li><strong>Εμφάνιση βοήθειας:</strong> Το εικονίδιο με το ερωτηματικό εμφανίζει αυτή τη σελίδα βοήθειας.</li>
            <li><strong>Διαγραφή συνομιλίας:</strong> Η συνομιλία μας αποθηκεύεται όσο παραμένετε σε αυτή τη σελίδα. Μπορείτε να διαγράψετε το ιστορικό αμέσως χρησιμοποιώντας το εικονίδιο του κάδου απορριμμάτων.</li>
            <li><strong>Κλείσιμο συνομιλίας:</strong> Το εικονίδιο κλεισίματος "x" διαγράφει τη συνομιλία μας και σας επιστρέφει στη φόρμα επικοινωνίας. Οι καταχωρήσεις σας εκεί παραμένουν διαθέσιμες, ώστε να τις στείλετε μέσω email στην ομάδα υποστήριξής μας.</li>
            <li><strong>Λάβετε άμεση απάντηση:</strong> Μεταφέρετε το μήνυμά σας από τη φόρμα επικοινωνίας σε εμένα και λάβετε άμεση απάντηση.</li>
            <li><strong>Αποστολή ερώτησης:</strong> Το εικονίδιο με το βέλος δίπλα στο πεδίο εισαγωγής αποστέλλει την ερώτησή σας σε εμένα. Παρακαλώ περιμένετε λίγο μέχρι να διατυπώσω την απάντησή μου.</li>
            <li><strong>Κλείσιμο διαλόγου:</strong> Κλείστε ολόκληρο τον διάλογο μαζί μου και επιστρέψτε στη φόρμα επικοινωνίας. Όλες οι καταχωρήσεις σας και η συνομιλία μας θα διαγραφούν.</li>
            <li><strong>Αποστολή email:</strong> Στείλτε τα δεδομένα σας από τη φόρμα επικοινωνίας και τη συνομιλία μας στην ομάδα υποστήριξης. Αν η συνομιλία μας πραγματοποιήθηκε σε άλλη γλώσσα, πρώτα θα μεταφραστεί στα γερμανικά για να κατανοήσει καλύτερα το αίτημά σας.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Griechisch')">OK</button>
    </div>
    
  </div>

</div>


<div id="user-help-container-it" class="send-confirmation" aria-modal="true" style="display:none">

  <div class="modal-standard-inner-large">
    
    <div class="modal-standard-inner-large-content">

        <h2 class="custom-h2">Sono Chati, il tuo assistente personale di chat, e voglio aiutarti. Subito.</h2>
        <p class="modal-standard-inner-large-content p"> Ti è mai successo? Scrivi un messaggio tramite un modulo di contatto e devi aspettare che qualcuno risponda alla tua richiesta. Con me è diverso: nella maggior parte dei casi ti fornisco subito una risposta alle tue domande – senza attese!</p>

        <h3 class="custom-h3">Come possiamo comunicare?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Risposta immediata:</strong> Inserisci la tua domanda nel campo di testo in basso. Tocca l'icona della freccia e ti risponderò immediatamente. In alternativa, puoi selezionare un argomento dall'elenco.</li>
            <li><strong>Selezione della lingua:</strong> Scegli la lingua preferita dal menu a discesa. Risponderò nella lingua selezionata.</li>
            <li><strong>Cronologia della chat:</strong> La nostra conversazione viene salvata fintanto che rimani su questa pagina. Puoi eliminare immediatamente la cronologia utilizzando l'icona del cestino.</li>
        </ul>

        <h3 class="custom-h3">Quali funzioni sono disponibili qui?</h3>
        <ul class="modal-standard-inner-large-content-ul">
            <li><strong>Seleziona lingua:</strong> Scegli la lingua con cui desideri conversare utilizzando la selezione della lingua accanto all'icona della bandiera.</li>
            <li><strong>Seleziona argomento:</strong> Gli argomenti più comuni possono essere selezionati direttamente dall'elenco degli argomenti. La prima domanda verrà inviata direttamente a me.</li>
            <li><strong>Mostra aiuto:</strong> L'icona con il punto interrogativo mostra questa pagina di aiuto.</li>
            <li><strong>Elimina conversazione:</strong> La nostra conversazione viene salvata fintanto che rimani su questa pagina. Puoi eliminare immediatamente la cronologia utilizzando l'icona del cestino.</li>
            <li><strong>Chiudi chat:</strong> L'icona di chiusura "x" elimina la nostra conversazione e ti riporta al modulo di contatto. I tuoi dati rimangono lì disponibili per inviarli tramite e-mail al nostro team di supporto.</li>
            <li><strong>Ottieni una risposta immediata:</strong> Trasferisci il tuo messaggio dal modulo di contatto a me e ricevi una risposta immediata.</li>
            <li><strong>Invia domanda:</strong> L'icona della freccia accanto al campo di inserimento invia la tua domanda a me. Attendi un momento mentre formulo la risposta.</li>
            <li><strong>Chiudi dialogo:</strong> Chiudi l'intero dialogo con me e torna al modulo di contatto. Tutti i tuoi dati e la nostra conversazione verranno eliminati.</li>
            <li><strong>Invia e-mail:</strong> Invia i tuoi dati dal modulo di contatto e la nostra conversazione al team di supporto. Se la nostra conversazione è avvenuta in un'altra lingua, verrà prima tradotta in tedesco per aiutare il team di supporto a capire meglio la tua richiesta.</li>
        </ul>

    </div>

    <div class="modal-standard-button-container">
        <button id="confirm3button" class="modal-standard-button" onclick="closeHelpModal('Italienisch')">OK</button>
    </div>
    
  </div>

</div>





<div id="logo-header">
    <a href="https://www.cream-collection.de" target="_blank">
    <div id="company-logo" alt="Company Logo">
    </div>    
    </a>

</div>


<div id="contact-form-title-container">

  <div class="contact-form-title-content">

      <p class="contact-form-custom0c-p">Chat Assistant</p>

  </div>

</div>


<div id="open-close-button-container" class="collapsible-container collapsed">

  <button onclick="opencloseChatbotConsentContainer(); opencloseContactFormSectionContainer(); opencloseInstantAnswerDialogButtonContainer(); opencloseInstantAnswerDialogButton(); opencloseFactoringSectionContainer()" class="arrow-button"></button>

</div>



<div id="contact-form-section-container" class="collapsible-container">

  <div id="contact-form-container">

    <input type="text" class="contact-form-aktennummer" name="aktennummer" placeholder="Aktennummer" maxlength="500" autocomplete="off" required />

    <input type="text" class="contact-form-name" name="name" placeholder="Vor- und Nachname" maxlength="500" autocomplete="name" required />

    <input type="email" class="contact-form-email" name="email" placeholder="E-Mail-Adresse" maxlength="500" autocomplete="email" required />

    <textarea class="contact-form-nachricht" name="Kontaktnachricht" rows="6" placeholder="Ihr Anliegen / Ihre Nachricht" maxlength="2000" required></textarea>

  </div>

</div>


<div id="factoring-section-container" class="collapsible-container">

  <div id="factoring-container">

    <input type="text" class="rechnungssteller" name="rechnungssteller" placeholder="Rechnungssteller" maxlength="500" autocomplete="off" required />
    
      <div class="suggestion-box-container" style="display:none">
    
        <ul class="suggestion-box"></ul>

      </div>

    <input type="text" class="rechnungsnummer" name="rechnungsnummer" placeholder="Rechnungsnummer" maxlength="500" autocomplete="off" required />

    <input type="text" class="contact-form-name" name="name" placeholder="Ihr Vor- und Nachname" maxlength="500" autocomplete="name" required />

    <input type="email" class="contact-form-email" name="email" placeholder="Ihre E-Mail-Adresse" maxlength="500" autocomplete="email" required />

    <textarea class="contact-form-nachricht" name="Kontaktnachricht" rows="6" placeholder="Ihr Anliegen / Ihre Nachricht" maxlength="2000" required></textarea>

  </div>

</div>












<div id="section-container">

<div id="toggle-container">


<div id="title-container">


    <div class="title-content">

        <p class="custom0a-p">Hallo, ich bin Chati,</p>
        <p class="custom0b-p">wenn Sie Fragen zum Thema Factoring oder zu meinem Unternehmen haben, dann sind Sie hier genau richtig. Ich weiß aber noch viel mehr. Versuchen Sie es einfach.</p>
        <p class="custom0c-p">Chat Assistant</p>


    </div>

    <div id="clara-image" alt="Clara Bild">
    </div>    


</div>









<div id="chatbot-consent-container" class="collapsible-container">

    <div id="chatbot-consent">

        <input type="checkbox" id="chatbot-consent-checkbox" />
        <label for="chatbot-consent-checkbox" id="chatbot-consent-label">Ich habe die <a id="consent-link" class="special-link-consent" href="https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/" target="_blank">Nutzungsbedingungen und Datenschutzerklärung</a> gelesen, verstanden und akzeptiert.</label>
    </div>        
</div>
    

    
    
<div id="instant-answer-dialog-button-container" class="collapsible-container">
     
    <button id="instant-answer-dialog-button" class="collapsible-container" onclick="transferMessageToChatbot(); opencloseChatbotConsentContainer(); opencloseContactFormSectionContainer(); opencloseInstantAnswerDialogButtonContainer(); opencloseInstantAnswerDialogButton(); opencloseOpenCloseButtonContainer(); opencloseFactoringSectionContainer()">Sofortantwort erhalten</button>
    <button id="message-send-button" onclick="openConfirmationModal()">E-Mail senden</button>


</div>


<div id="factoring-instant-answer-dialog-button-container" class="collapsible-container">
     
  <button id="factoring-instant-answer-dialog-button" class="collapsible-container" onclick="transferFactoringMessageToChatbot(); opencloseChatbotConsentContainer(); opencloseContactFormSectionContainer(); opencloseInstantAnswerDialogButtonContainer(); opencloseInstantAnswerDialogButton(); opencloseOpenCloseButtonContainer(); opencloseFactoringSectionContainer()">Sofortantwort erhalten</button>
  <button id="factoring-message-send-button" onclick="openConfirmationModal()">E-Mail senden</button>


</div>





<div id="chatbot-container">
      
    <div id="chatbot">


      <div id="loader-container">
            
        <div id="loader">
    
        </div>

        <div id="loader-text">Einen kurzen Augenblick bitte. Ihre Anfrage wird bearbeitet.

        </div>
    
      </div>






        <div id="chatbot-header">

          <div id="chatbot-language">

            <span id="selected-flag" class="flag-icon flag-icon-de" style="position:absolute;left:0px;top:50%;transform:translateY(-50%)"></span>
            <select id="language-dropdown" onchange="updateFlagAndSendMessage()">
              <option value="Deutsch" data-flag="flag-icon-de">Deutsch...</option>
              <option value="Englisch" data-flag="flag-icon-gb">English</option>
              <option value="Spanisch" data-flag="flag-icon-es">Español</option>
              <option value="Türkisch" data-flag="flag-icon-tr">Türkçe</option>
              <option value="Arabisch" data-flag="flag-icon-sa">العربية</option>
              <option value="Russisch" data-flag="flag-icon-ru">Русский</option>
              <option value="Polnisch" data-flag="flag-icon-pl">Polski</option>
              <option value="Rumänisch" data-flag="flag-icon-ro">Română</option>
              <option value="Griechisch" data-flag="flag-icon-gr">Ελληνικά</option>
              <option value="Italienisch" data-flag="flag-icon-it">Italiano</option>
            </select>
                        
          </div>

          <div id="chatbot-themes">

            <select id="theme" onchange="handleThemeChange()">
              <option value disabled selected>Themen:</option>
              <option value="Bitte zeige mir eine aktuelle Forderungsaufstellung an. Beachte die Formatierungsanweisungen.">Forderungsaufstellung</option>
              <option value="Ich möchte die Rechnung bezahlen. Welche Zahlungsarten kann ich nutzen?">Bezahlung</option>
              <option value="Bitte zeige mir meine eingegangenen bzw. verbuchten Zahlungen an.">Zahlungseingang</option>
              <option value="Ich möchte eine Ratenzahlung beantragen.">Ratenzahlung</option>
              <option value="Ich bin mit der Rechnung nicht einverstanden. Wie kann ich einen Widerspruch einreichen?">Widerspruch</option>
              <option value="Wer oder was ist die ADELTA.FINANZ AG?">Über ADELTA.FINANZ</option>
            </select>

          </div>

          <div id="chatbot-icons">

            <svg class="icon3 hover-scale" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Hilfe" onclick="showHelpModal()">  
            <title>Hilfe</title>
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z">
            </path>
            </svg>

            <svg class="icon2 hover-scale" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Chat-Historie löschen" onclick="openDeleteConfirmation()"> 
            <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0">
            <title>Chat-Historie löschen</title>
            </path>
            </svg>

            <svg class="icon4 hover-scale" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" title="Chat-Historie löschen und Chatbot schließen" onclick="openDeleteConfirmation2()">  
            <title>Chat-Historie löschen und Chatbot schließen</title>
            <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z">
            </path>
            </svg>
                    
          </div>

        </div>




        <div id="chatbot-messages">
            


            

            <div id="chatbot-messages-gpt">

            </div>
        </div>



        <div id="chatbot-input-container">

            <div id="chatbot-input-inner-container">

                <div id="input-left"> 
                 <textarea id="chatbot-input" placeholder="Wie kann ich Ihnen helfen?" maxlength="2000"></textarea>
                </div>
                <div id="input-right"> 

                    <button id="input-right" aria-label="Frage an Chatbot senden" style="background:none;border:none;cursor:pointer;height:45px;width:45px" onclick="sendMessage()">
                    <svg class="icon hover-scale" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" title="Frage an Chatbot senden">  
                    <title>Frage an Chatbot senden</title>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5">
                    </path>
                    </svg>
                    </button>
               </div>

            </div>


            <div id="chatbot-input-modal">

                <textarea id="expanded-chatbot-input" placeholder="Wie kann ich Ihnen helfen? Geben Sie hier Ihre Frage ein." maxlength="2000"></textarea>
                <button id="micButton">MIC</button>
                <button id="modal-ok-button" onclick="closeModal()">OK</button>
            </div>

        </div>

    
    </div>


    <div id="input-button-container">

        <button id="everythingOK" class="okAndnotOK-Button" onclick="openDeleteConfirmation3()">Dialog schließen</button>
        <button id="notOK" class="okAndnotOK-Button" onclick="openConfirmationModal()">E-Mail senden</button>

    </div>


    <div id="back-to-outlook-container">

        <button id="outlook-button" class="okAndnotOK-Button" onclick="forwardBotMessage()">Letzte Chatbot-Antwort an Outlook übertragen</button>

    </div>



</div>




</div>

</div>
	
<div id="footer">

</div>

	


<script>

    // Überwache das Kontrollkästchen und aktiviere/deaktiviere das - copyright cream5collection Stephan Vila - Eingabefeld und die Buttons je nach Zustand
    document.getElementById('chatbot-consent-checkbox').addEventListener('change', function() {
      const consentGiven = this.checked;
      document.getElementById('chatbot-input').disabled = !consentGiven;
      document.getElementById('chatbot-send-button').disabled = !consentGiven;
      document.getElementById('chatbot-clear-button').disabled = !consentGiven;



    });

    let conversationHistory = [];  // Speichert den Verlauf der Konversation

let isWaitingForResponse = false;  // Überwacht, ob auf eine Antwort gewartet wird
let alreadyProcessedChunks = new Set(); // Set zum Speichern von verarbeiteten Chunk-IDs
let hasLoggedDisplayData = false; // Neue Variable, um zu überprüfen, ob bereits geloggt wurde
let currentUserMessageElement = null; // Speichert das Element der letzten Benutzerfrage
let recognition;  // Globale Definition von recognition
let isRecognizing = false;  // Zustand der Spracherkennung
let recognitionStarted = false;  // Variable zum Überwachen, ob die Spracherkennung bereits gestartet wurde
let chatbotHistory = [];  // Speichert den gesamten Chatverlauf
let preventUserMessageDeletion = false; // Variable, um zu verfolgen, ob die Schlüsselwort-Bedingung erfüllt wurde


// Event Listener für die Enter-Taste im Eingabefeld
document.getElementById('chatbot-input').addEventListener('keypress', function(event) {
  if (event.key === 'Enter') {
    event.preventDefault();
    sendMessage();
  }
});





// Übersetzungen für verschiedene Sprachen

const textTranslations = {

 "Deutsch": {
        "greeting": "aktuell nicht in Benutzung",
        "intro": "aktuell nicht in Benutzung",
        "consentText": "Ich habe die <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>Nutzungsbedingungen und Datenschutzerklärung</a> gelesen, verstanden und akzeptiert.",
        "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
        "commonQuestions": "aktuell nicht in Benutzung",
        "selectQuestion": "Thema",
        "sendButton": "Frage senden",
        "clearButton": "Historie leeren",
        "messageButton": "Nachricht senden",
        "message2Button": "Nachricht senden",
        "helpButton": "Hilfe anzeigen",
        "SofortantwortOpenButton": "Sofortantwort erhalten",
        "SofortantwortCloseButton": "Sofortantwort-Fenster schließen",
        "cancelButton": "Abbrechen",
        "cancel2Button": "Abbrechen",
        "confirmButton": "OK",
        "confirm2Button": "OK",
        "confirm3Button": "OK",
        "confirm4Button": "OK",
        "everythingOK": "Dialog schließen",
        "notOK": "Nachricht senden",
        "resetPageText1": "Wir freuen uns, dass wir Ihnen mit diesem Service helfen konnten.",
        "resetPageText2": "Ihre Chat-Historie wird gelöscht und die Nachricht verworfen.",
        "inputPlaceholder": "Wie kann ich Ihnen helfen?",
        "loader-text": "Einen kurzen Augenblick bitte. Ihre Anfrage wird bearbeitet.",
        "chatHistoryDeleted": "Ihre Chat-Historie wird gelöscht.",
        "chatHistoryDeletedAndClosed": "Ihre Chat-Historie wird gelöscht und der Chatbot geschlossen.",
        "suggestedQuestions": [
            "aktuell nicht in Benutzung",
            "aktuell nicht in Benutzung",
            "aktuell nicht in Benutzung",
            "aktuell nicht in Benutzung",
            "aktuell nicht in Benutzung",
            "aktuell nicht in Benutzung",
        ],   
        "themes": [
            "Forderungsaufstellung",
            "Bezahlung",
            "Zahlungseingang",
            "Ratenzahlung",
            "Widerspruch",
            "Über ADELTA.FINANZ"    
        ],
    },



    "Englisch": {
        "greeting": "currently not in use",
        "intro": "currently not in use",
        "consentText": "I have read, understood, and accepted the <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>terms of use and privacy policy</a>.",
        "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
        "commonQuestions": "currently not in use",
        "selectQuestion": "Theme",
        "sendButton": "Send Question",
        "clearButton": "Clear History",
        "messageButton": "Send Message",
        "message2Button": "Send Message",
        "helpButton": "Show Help",
        "SofortantwortOpenButton": "Get Instant Response",
        "SofortantwortCloseButton": "Close Instant Response Window",
        "cancelButton": "Cancel",
        "cancel2Button": "Cancel",
        "confirmButton": "OK",
        "confirm2Button": "OK",
        "confirm3Button": "OK",
        "confirm4Button": "OK",
        "everythingOK": "Close dialog",
        "notOK": "Send message",
        "resetPageText1": "We are glad that we could assist you with this service.",
        "resetPageText2": "Your chat history will be deleted and the message discarded.",
        "inputPlaceholder": "How can I help you?",
        "loader-text": "Please wait a moment. Your request is being processed.",
        "chatHistoryDeleted": "Your chat history will be deleted.",
        "chatHistoryDeletedAndClosed": "Your chat history will be deleted and the chatbot will be closed.",
        "suggestedQuestions": [
            "currently not in use",
            "currently not in use",
            "currently not in use",
            "currently not in use",
            "currently not in use",
            "currently not in use"
        ],   
        "themes": [
            "Statement of claims", 
            "Reason for claim", 
            "Incoming payment", 
            "Installment payment", 
            "Objection", 
            "About cream collection"
        ],

    },


    "Spanisch": {
        "greeting": "No está en uso.",
        "intro": "No está en uso.",
        "consentText": "He leído, comprendido y aceptado los <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>términos de uso y la política de privacidad</a>.",
        "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
        "commonQuestions": "No está en uso.",
        "selectQuestion": "Tema",
        "sendButton": "Enviar Pregunta",
        "clearButton": "Borrar Historial",
        "messageButton": "Enviar Mensaje",
        "message2Button": "Enviar Mensaje",
        "helpButton": "Mostrar Ayuda",
        "SofortantwortOpenButton": "Obtener Respuesta Inmediata",
        "SofortantwortCloseButton": "Cerrar Ventana de Respuesta Inmediata",
        "cancelButton": "Cancelar",
        "cancel2Button": "Cancelar",
        "confirmButton": "OK",
        "confirm2Button": "OK",
        "confirm3Button": "OK",
        "confirm4Button": "OK",
        "everythingOK": "Cerrar diálogo",
        "notOK": "Enviar mensaje",
        "resetPageText1": "Nos alegra haber podido ayudarle con este servicio.",
        "resetPageText2": "Su historial de chat será eliminado y el mensaje descartado.",
        "inputPlaceholder": "¿Cómo puedo ayudarte?",
        "loader-text": "Por favor, espera un momento. Estamos procesando tu solicitud.",
        "chatHistoryDeleted": "Su historial de chat será eliminado.",
        "chatHistoryDeletedAndClosed": "Su historial de chat será eliminado y el chatbot se cerrará.",
        "suggestedQuestions": [
            "No está en uso.",
            "No está en uso.",
            "No está en uso.",
            "No está en uso.",
            "No está en uso.",
            "No está en uso."
        ],   
        "themes": [
            "Declaración de reclamaciones",
            "Razón de la reclamación",
            "Pago recibido",
            "Pago a plazos",
            "Objeción",
            "Acerca de cream collection"
        ],

     },


"Türkisch": {
    "greeting": "şu anda kullanılmıyor",
    "intro": "şu anda kullanılmıyor",
    "consentText": "<a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>Kullanım Koşulları ve Gizlilik Politikasını</a> okudum, anladım ve kabul ettim.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "şu anda kullanılmıyor",
    "selectQuestion": "Konu",
    "sendButton": "Soru Gönder",
    "clearButton": "Geçmişi Temizle",
    "messageButton": "Mesaj Gönder",
    "message2Button": "Mesaj Gönder",
    "helpButton": "Yardımı Göster",
    "SofortantwortOpenButton": "Anında Yanıt Al",
    "SofortantwortCloseButton": "Anında Yanıt Penceresini Kapat",
    "cancelButton": "İptal",
    "cancel2Button": "İptal",
    "confirmButton": "Tamam",
    "confirm2Button": "Tamam",
    "confirm3Button": "Tamam",
    "confirm4Button": "Tamam",
    "everythingOK": "Diyaloğu kapat",
    "notOK": "Mesaj gönder",
    "resetPageText1": "Bu hizmetle size yardımcı olabildiğimiz için mutluyuz.",
    "resetPageText2": "Sohbet geçmişiniz silinecek ve mesaj iptal edilecektir.",
    "inputPlaceholder": "Size nasıl yardımcı olabilirim?",
    "loader-text": "Lütfen bir an bekleyin. Talebiniz işleniyor.",
    "chatHistoryDeleted": "Sohbet geçmişiniz silinecek.",
    "chatHistoryDeletedAndClosed": "Sohbet geçmişiniz silinecek ve chatbot kapatılacak.",
    "suggestedQuestions": [
        "şu anda kullanılmıyor",
        "şu anda kullanılmıyor",
        "şu anda kullanılmıyor",
        "şu anda kullanılmıyor",
        "şu anda kullanılmıyor",
        "şu anda kullanılmıyor"
    ],
    "themes": [
    "Alacak beyannamesi",
        "Alacak nedeni",
        "Gelen ödeme",
        "Taksitli ödeme",
        "İtiraz",
        "cream collection hakkında"
    ]
},


"Arabisch": {
    "greeting": "غير مستخدم حاليًا",
    "intro": "غير مستخدم حاليًا",
    "consentText": "لقد قرأت وفهمت ووافقت على <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>شروط الاستخدام وسياسة الخصوصية</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "غير مستخدم حاليًا",
    "selectQuestion": "موضوع",
    "sendButton": "إرسال السؤال",
    "clearButton": "مسح المحفوظات",
    "messageButton": "إرسال رسالة",
    "message2Button": "إرسال رسالة",
    "helpButton": "إظهار المساعدة",
    "SofortantwortOpenButton": "الحصول على رد فوري",
    "SofortantwortCloseButton": "إغلاق نافذة الرد الفوري",
    "cancelButton": "إلغاء",
    "cancel2Button": "إلغاء",
    "confirmButton": "موافق",
    "confirm2Button": "موافق",
   "confirm3Button": "موافق",
   "confirm4Button": "موافق",
  "everythingOK": "إغلاق الحوار",
    "notOK": "إرسال الرسالة",
    "resetPageText1": "نحن سعداء لأننا تمكنا من مساعدتك بهذه الخدمة.",
    "resetPageText2": "سيتم حذف سجل المحادثة الخاص بك وسيتم تجاهل الرسالة.",    
    "inputPlaceholder": "كيف يمكنني مساعدتكم؟",
    "loader-text": "يرجى الانتظار لحظة. يتم معالجة طلبك.",
    "chatHistoryDeleted": "سيتم حذف سجل المحادثة الخاص بك.",
    "chatHistoryDeletedAndClosed": "سيتم حذف سجل المحادثة الخاص بك وسيتم إغلاق الروبوت.",
    "suggestedQuestions": [
        "غير مستخدم حاليًا",
        "غير مستخدم حاليًا",
        "غير مستخدم حاليًا",
        "غير مستخدم حاليًا",
        "غير مستخدم حاليًا",
        "غير مستخدم حاليًا"
    ],
    "themes": [
        "بيان المطالبات",
        "سبب المطالبة",
        "الدفعة الواردة",
        "دفع بالتقسيط",
        "اعتراض",
        "حول cream collection"
    ]
},



"Russisch": {
    "greeting": "в настоящее время не используется",
    "intro": "в настоящее время не используется",
    "consentText": "Я прочитал, понял и согласен с <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>условиями использования и политикой конфиденциальности</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "в настоящее время не используется",
    "selectQuestion": "Тема",
    "sendButton": "Отправить вопрос",
    "clearButton": "Очистить историю",
    "messageButton": "Отправить сообщение",
    "message2Button": "Отправить сообщение",
    "helpButton": "Показать помощь",
    "SofortantwortOpenButton": "Получить мгновенный ответ",
    "SofortantwortCloseButton": "Закрыть окно мгновенного ответа",
    "cancelButton": "Отмена",
    "cancel2Button": "Отмена",
    "confirmButton": "ОК",
    "confirm2Button": "ОК",
    "confirm3Button": "OK",
    "confirm4Button": "OK",
    "everythingOK": "Закрыть диалог",
    "notOK": "Отправить сообщение",
    "resetPageText1": "Мы рады, что смогли помочь вам с этой услугой.",
    "resetPageText2": "История чата будет удалена, а сообщение отменено.",
    "inputPlaceholder": "Чем я могу вам помочь?",
    "loader-text": "Пожалуйста, подождите немного. Ваш запрос обрабатывается.",
    "chatHistoryDeleted": "История вашего чата будет удалена.",
    "chatHistoryDeletedAndClosed": "История вашего чата будет удалена, и чат-бот будет закрыт.",
    "suggestedQuestions": [
        "в настоящее время не используется",
        "в настоящее время не используется",
        "в настоящее время не используется",
        "в настоящее время не используется",
        "в настоящее время не используется",
        "в настоящее время не используется"
    ],
    "themes": [
    "Заявление о требованиях",
        "Основание для требования",
        "Входящий платеж",
        "Оплата в рассрочку",
        "Возражение",
        "О компании cream collection"
    ]
},




"Polnisch": {
    "greeting": "obecnie nieużywane",
    "intro": "obecnie nieużywane",
    "consentText": "Przeczytałem, zrozumiałem i zaakceptowałem <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>warunki użytkowania i politykę prywatności</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "obecnie nieużywane",
    "selectQuestion": "Temat",
    "sendButton": "Wyślij pytanie",
    "clearButton": "Wyczyść historię",
    "messageButton": "Wyślij wiadomość",
    "message2Button": "Wyślij wiadomość",
    "helpButton": "Pokaż pomoc",
    "SofortantwortOpenButton": "Uzyskaj natychmiastową odpowiedź",
    "SofortantwortCloseButton": "Zamknij okno natychmiastowej odpowiedzi",
    "cancelButton": "Anuluj",
    "cancel2Button": "Anuluj",
    "confirmButton": "OK",
    "confirm2Button": "OK",
    "confirm3Button": "OK",
    "confirm4Button": "OK",
    "everythingOK": "Zamknij dialog",
    "notOK": "Wyślij wiadomość",
    "resetPageText1": "Cieszymy się, że mogliśmy pomóc Ci w tej usłudze.",
    "resetPageText2": "Historia czatu zostanie usunięta, a wiadomość odrzucona.",
    "inputPlaceholder": "Jak mogę ci pomóc?",
    "loader-text": "Proszę czekać chwilę. Twoje zapytanie jest przetwarzane.",
    "chatHistoryDeleted": "Twoja historia czatu zostanie usunięta.",
    "chatHistoryDeletedAndClosed": "Twoja historia czatu zostanie usunięta, a chatbot zostanie zamknięty.",
    "suggestedQuestions": [
        "obecnie nieużywane",
        "obecnie nieużywane",
        "obecnie nieużywane",
        "obecnie nieużywane",
        "obecnie nieużywane",
        "obecnie nieużywane"
    ],
    "themes": [
    "Oświadczenie o roszczeniach",
        "Podstawa roszczenia",
        "Wpływ płatności",
        "Płatność ratalna",
        "Sprzeciw",
        "O cream collection"
    ]
},




"Rumänisch": {
    "greeting": "în prezent nu este utilizat",
    "intro": "în prezent nu este utilizat",
    "consentText": "Am citit, înțeles și acceptat <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>termenii și condițiile de utilizare și politica de confidențialitate</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "în prezent nu este utilizat",
    "selectQuestion": "Temă",
    "sendButton": "Trimiteți întrebare",
    "clearButton": "Ștergeți istoricul",
    "messageButton": "Trimiteți mesaj",
    "message2Button": "Trimiteți mesaj",
    "helpButton": "Afișați ajutor",
    "SofortantwortOpenButton": "Obțineți răspuns instantaneu",
    "SofortantwortCloseButton": "Închideți fereastra de răspuns instantaneu",
    "cancelButton": "Anulați",
    "cancel2Button": "Anulați",
    "confirmButton": "OK",
    "confirm2Button": "OK",
    "confirm3Button": "OK",
    "confirm4Button": "OK",
    "everythingOK": "Închide dialogul",
    "notOK": "Trimite mesaj",
    "resetPageText1": "Ne bucurăm că v-am putut ajuta cu acest serviciu.",
    "resetPageText2": "Istoricul dvs. de chat va fi șters și mesajul va fi anulat.",
    "inputPlaceholder": "Cum vă pot ajuta?",
    "loader-text": "Vă rugăm să așteptați un moment. Solicitarea dvs. este în curs de procesare.",
    "chatHistoryDeleted": "Istoricul conversațiilor dvs. va fi șters.",
    "chatHistoryDeletedAndClosed": "Istoricul conversațiilor dvs. va fi șters, iar chatbot-ul va fi închis.",
    "suggestedQuestions": [
        "în prezent nu este utilizat",
        "în prezent nu este utilizat",
        "în prezent nu este utilizat",
        "în prezent nu este utilizat",
        "în prezent nu este utilizat",
        "în prezent nu este utilizat"
    ],
    "themes": [
    "Declarație de creanțe",
        "Motivul creanței",
        "Plată primită",
        "Plată în rate",
        "Obiecție",
        "Despre cream collection"
    ]
},



"Griechisch": {
    "greeting": "αυτήν τη στιγμή δεν χρησιμοποιείται",
    "intro": "αυτήν τη στιγμή δεν χρησιμοποιείται",
    "consentText": "Έχω διαβάσει, κατανοήσει και αποδεχτεί τους <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>όρους χρήσης και την πολιτική απορρήτου</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "αυτήν τη στιγμή δεν χρησιμοποιείται",
    "selectQuestion": "Θέμα",
    "sendButton": "Υποβολή Ερώτησης",
    "clearButton": "Διαγραφή Ιστορικού",
    "messageButton": "Αποστολή Μηνύματος",
    "message2Button": "Αποστολή Μηνύματος",
    "helpButton": "Προβολή Βοήθειας",
    "SofortantwortOpenButton": "Λήψη Άμεσης Απάντησης",
    "SofortantwortCloseButton": "Κλείσιμο Παραθύρου Άμεσης Απάντησης",
    "cancelButton": "Ακύρωση",
    "cancel2Button": "Ακύρωση",
    "confirmButton": "Εντάξει",
    "confirm2Button": "Εντάξει",
    "confirm3Button": "Εντάξει", 
    "confirm4Button": "Εντάξει",
    "everythingOK": "Κλείσιμο διαλόγου",
    "notOK": "Αποστολή μηνύματος",
    "resetPageText1": "Χαιρόμαστε που μπορέσαμε να σας βοηθήσουμε με αυτή την υπηρεσία.",
    "resetPageText2": "Το ιστορικό συνομιλιών σας θα διαγραφεί και το μήνυμα θα απορριφθεί.",
    "inputPlaceholder": "Πώς μπορώ να σας βοηθήσω;",
    "loader-text": "Παρακαλώ περιμένετε λίγο. Το αίτημά σας επεξεργάζεται.",
    "chatHistoryDeleted": "Το ιστορικό συνομιλιών σας θα διαγραφεί.",
    "chatHistoryDeletedAndClosed": "Το ιστορικό συνομιλιών σας θα διαγραφεί και το chatbot θα κλείσει.",
    "suggestedQuestions": [
        "αυτήν τη στιγμή δεν χρησιμοποιείται",
        "αυτήν τη στιγμή δεν χρησιμοποιείται",
        "αυτήν τη στιγμή δεν χρησιμοποιείται",
        "αυτήν τη στιγμή δεν χρησιμοποιείται",
        "αυτήν τη στιγμή δεν χρησιμοποιείται",
        "αυτήν τη στιγμή δεν χρησιμοποιείται"
    ],
    "themes": [
        "Κατάσταση απαιτήσεων",
        "Λόγος απαίτησης",
        "Εισερχόμενη πληρωμή",
        "Πληρωμή σε δόσεις",
        "Αντίρρηση",
        "Σχετικά με το cream collection"
    ]
},


"Italienisch": {
    "greeting": "attualmente non in uso",
    "intro": "attualmente non in uso",
    "consentText": "Ho letto, compreso e accettato i <a id='consent-link' class='special-link' href='{{dataProtectionUrl}}' target='_blank'>termini di utilizzo e l'informativa sulla privacy</a>.",
    "dataProtectionUrl": "https://www.cream-collection.de/nutzung-and-datenschutz-chatbot/",
    "commonQuestions": "attualmente non in uso",
    "selectQuestion": "Tema",
    "sendButton": "Invia domanda",
    "clearButton": "Cancella cronologia",
    "messageButton": "Invia messaggio",
    "message2Button": "Invia messaggio",
    "helpButton": "Mostra aiuto",
    "SofortantwortOpenButton": "Ricevi risposta immediata",
    "SofortantwortCloseButton": "Chiudi finestra risposta immediata",
    "cancelButton": "Annulla",
    "cancel2Button": "Annulla",
    "confirmButton": "OK",
    "confirm2Button": "OK",
    "confirm3Button": "OK",
    "confirm4Button": "OK",
    "everythingOK": "Chiudi dialogo",
    "notOK": "Invia messaggio",
    "resetPageText1": "Siamo felici di aver potuto aiutarvi con questo servizio.",
    "resetPageText2": "La cronologia della chat verrà cancellata e il messaggio verrà eliminato.",
    "inputPlaceholder": "Come posso aiutarti?",
    "loader-text": "Attendere un momento. La tua richiesta è in fase di elaborazione.",
    "chatHistoryDeleted": "La cronologia della chat verrà eliminata.",
    "chatHistoryDeletedAndClosed": "La cronologia della chat verrà eliminata e il chatbot verrà chiuso.",
    "suggestedQuestions": [
        "attualmente non in uso",
        "attualmente non in uso",
        "attualmente non in uso",
        "attualmente non in uso",
        "attualmente non in uso",
        "attualmente non in uso"
    ],
    "themes": [
        "Dichiarazione delle pretese",
        "Motivo della pretesa",
        "Pagamento ricevuto",
        "Pagamento rateale",
        "Obiezione",
        "Informazioni su cream collection"
    ]
},



};



function showHelpModal() {
  const selectedLanguage = document.getElementById('language-dropdown').value;

  // Alle modalen Dialoge ausblenden
  document.getElementById('user-help-container-de').style.display = 'none';
  document.getElementById('user-help-container-en').style.display = 'none';
  document.getElementById('user-help-container-es').style.display = 'none';
  document.getElementById('user-help-container-tr').style.display = 'none';
  document.getElementById('user-help-container-sa').style.display = 'none';
  document.getElementById('user-help-container-ru').style.display = 'none';
  document.getElementById('user-help-container-pl').style.display = 'none';
  document.getElementById('user-help-container-ro').style.display = 'none';
  document.getElementById('user-help-container-gr').style.display = 'none';
  document.getElementById('user-help-container-it').style.display = 'none';


  // Je nach Sprache das richtige Modal anzeigen
  if (selectedLanguage === 'Deutsch') {
    document.getElementById('user-help-container-de').style.display = 'flex';
  } else if (selectedLanguage === 'Englisch') {
    document.getElementById('user-help-container-en').style.display = 'flex';
  } else if (selectedLanguage === 'Spanisch') {
    document.getElementById('user-help-container-es').style.display = 'flex';
  } else if (selectedLanguage === 'Türkisch') {
    document.getElementById('user-help-container-tr').style.display = 'flex';
  } else if (selectedLanguage === 'Arabisch') {
    document.getElementById('user-help-container-sa').style.display = 'flex';
  } else if (selectedLanguage === 'Russisch') {
    document.getElementById('user-help-container-ru').style.display = 'flex';
  } else if (selectedLanguage === 'Polnisch') {
    document.getElementById('user-help-container-pl').style.display = 'flex';
  } else if (selectedLanguage === 'Rumänisch') {
    document.getElementById('user-help-container-ro').style.display = 'flex';
  } else if (selectedLanguage === 'Griechisch') {
    document.getElementById('user-help-container-gr').style.display = 'flex';
  } else if (selectedLanguage === 'Italienisch') {
    document.getElementById('user-help-container-it').style.display = 'flex';
  } else {
    document.getElementById('user-help-container-de').style.display = 'flex';
  }
}



function closeHelpModal(language) {
  if (language === 'Deutsch') {
    document.getElementById('user-help-container-de').style.display = 'none';
  } else if (language === 'Englisch') {
    document.getElementById('user-help-container-en').style.display = 'none';
  } else if (language === 'Spanisch') {
    document.getElementById('user-help-container-es').style.display = 'none';
  } else if (language === 'Türkisch') {
    document.getElementById('user-help-container-tr').style.display = 'none';
  } else if (language === 'Arabisch') {
    document.getElementById('user-help-container-sa').style.display = 'none';
  } else if (language === 'Russisch') {
    document.getElementById('user-help-container-ru').style.display = 'none';
  } else if (language === 'Polnisch') {
    document.getElementById('user-help-container-pl').style.display = 'none';
  } else if (language === 'Rumänisch') {
    document.getElementById('user-help-container-ro').style.display = 'none';
  } else if (language === 'Griechisch') {
    document.getElementById('user-help-container-gr').style.display = 'none';
  } else if (language === 'Italienisch') {
    document.getElementById('user-help-container-it').style.display = 'none';
  } else {
    // Falls keine der Sprachen gesetzt ist, Deutsch als Standard verwenden
    document.getElementById('user-help-container-de').style.display = 'none';
  }
}





function scrollToLastUserQuestion() {
    const messagesElement = document.getElementById('chatbot-messages');
    const lastUserMessage = document.querySelector('.user-message:last-of-type');

    if (lastUserMessage && messagesElement) {
        const isScrollable = messagesElement.scrollHeight > messagesElement.clientHeight;

        // Scrollt nur, wenn der Nachrichtenbereich tatsächlich scrollen kann
        if (isScrollable) {
            messagesElement.scrollTo({
                top: messagesElement.scrollHeight,
                behavior: 'smooth'
            });
        }
    }
}



function scrollBotWindowDown(linesToScroll = 20) {
    const messagesElement = document.getElementById('chatbot-messages');

    if (messagesElement) {
        // Höhe des Nachrichtenbereichs berechnen
        const lineHeight = 18; // Angenommen, jede Zeile hat 18px Höhe
        const scrollAmount = linesToScroll * lineHeight;
        const currentScroll = messagesElement.scrollTop;
        const newScrollPosition = currentScroll + scrollAmount;

        console.log("Scrollen um: ", scrollAmount, " von Position ", currentScroll, " zu ", newScrollPosition);

        messagesElement.scrollTo({
            top: newScrollPosition,
            behavior: 'smooth'
        });
    } else {
        console.error("Element #chatbot-messages nicht gefunden");
    }
}

// Diese Funktion wird aufgerufen, nachdem die Bot-Nachricht vollständig angezeigt wurde
function onBotMessageDisplayed() {
    console.log("onBotMessageDisplayed wurde aufgerufen");
    setTimeout(() => {
        scrollBotWindowDown(15); // Scrollt das Bot-Fenster 5 Zeilen nach unten
    }, 100); // Kurze Verzögerung, um sicherzustellen, dass die Nachricht vollständig gerendert ist
}



function saveUserMessage(userMessage) {
    // ConversationHistory aktualisieren (ungerade Anzahl)
    conversationHistory.push({ role: 'user', content: userMessage });
    // Überprüfen, ob das Löschen deaktiviert werden soll
    if (!preventUserMessageDeletion) {
        if (conversationHistory.length > 20) {
            conversationHistory.shift(); // Entferne das älteste Paar
        }
    }

    // ChatbotHistory aktualisieren für Absätze
    const formattedUserMessage = "\n\nBenutzernachricht:\n\n" + userMessage;
    chatbotHistory.push({ role: 'user', content: formattedUserMessage });
}

function saveBotMessage(botMessage) {
    // Überprüfen, ob die Bot-Nachricht eines der Schlüsselwörter enthält
    if (botMessage.includes("Aktennummer") || botMessage.includes("Passwort")) {
        preventUserMessageDeletion = true; // Deaktiviere das Löschen für die gesamte Session
    }

    // ConversationHistory aktualisieren (gerade Anzahl)
    conversationHistory.push({ role: 'assistant', content: botMessage });

    // ChatbotHistory aktualisieren mit HTML <br> Tags für Absätze
    const formattedBotMessage = "\n\nAntwort von Clara:\n\n" + botMessage;
    chatbotHistory.push({ role: 'assistant', content: formattedBotMessage });
}



function getConversationHistoryForGPT() {
    // Rückgabe der letzten 3 Paare plus der aktuellen User-Nachricht
    return conversationHistory;
}


function cleanTextForTranslation(text) {
    return text.replace(/<[^>]*>/g, '').trim(); // Entfernt alle HTML-Tags und trimmt Leerzeichen
}

function getChatbotHistoryForTranslation() {
    let cleanedHistory = chatbotHistory.map(message => {
        return {
            role: message.role,
            content: cleanTextForTranslation(message.content) // Bereinige den Text von HTML
        };
    });
    return cleanedHistory;
}











//Wird aktuell nicht genutzt
function formatConversationHistory(history) {
    let formattedHistory = [];
    for (let i = 0; i < history.length; i += 2) {
        if (history[i + 1]) { // Falls eine Antwort existiert
            formattedHistory.push(history[i + 1]); // Antwort
        }
        formattedHistory.push(history[i]); // Frage
    }
    return formattedHistory;
}





    // Funktion zum Senden der Nachricht des Benutzers und Abrufen der Antwort des Bots ####################################
async function sendMessage() {
    if (isWaitingForResponse) {
        alert('Bitte warten Sie, bis die aktuelle Anfrage bearbeitet ist.');
        return; // Beendet die Funktion, wenn bereits auf eine Antwort gewartet wird
    }

    const inputElement = document.getElementById('chatbot-input');
    let message = inputElement.value;

    console.log('Inhalt der Nachricht vor dem Senden:', message);

    // Zusätzliche Überprüfung der Länge der Eingabe
    if (message.length > 2000) {
        message = message.substring(0, 2000);
        alert("Ihre Frage wurde auf 2.000 Zeichen gekürzt.");
    }

    console.log('Inhalt der Nachricht nach Kürzung:', message);


    isWaitingForResponse = true; // Status auf "Warten auf Antwort" setzen

    // Erfassen der aktuell ausgewählten Sprache
    const language = document.getElementById('language-dropdown').value;

    console.log('Aktuelle Sprache:', language);


    inputElement.value = '';
    inputElement.focus();

    const messagesElement = document.getElementById('chatbot-messages-gpt');
    const newMessageElement = document.createElement('div');

    // Formatierung der Nachricht des Benutzers und Hinzufügen zum Nachrichtenbereich
    newMessageElement.innerHTML = parseLinks(message);
    newMessageElement.classList.add('user-message');
    messagesElement.appendChild(newMessageElement);


    scrollToLastUserQuestion();


    // Speichere das aktuelle Benutzerfrage-Element
    currentUserMessageElement = newMessageElement;

    console.log('User message:', message); // Log der gesendeten Nachricht

    // Ergänzen, auch im anderen Chatbot:
    saveUserMessage(message); // Speichern der Benutzernachricht in beiden Historien

    // loader anzeigen
       const loaderElement = document.getElementById('loader');
       loaderElement.style.display = 'block';
       document.getElementById('loader-container').style.display = 'flex';
       document.getElementById('loader-text').style.display = 'block';

    // Scrollt die Seite sanft nach oben
       window.scrollTo({ top: 0, behavior: 'smooth' });

    const inputField = document.getElementById('chatbot-input');
    inputField.blur(); // Entfernt den Fokus und schließt die Tastatur auf Mobilgeräten


    // Kontext und Kunde aus den CSS-Variablen holen
    const rulesContext = getComputedStyle(document.documentElement).getPropertyValue('--rules-context').trim();
    const rulesCustomer = getComputedStyle(document.documentElement).getPropertyValue('--rules-customer').trim();


    // Protokollieren der Werte
    console.log(`Übergebener Kontext: ${rulesContext}`);
    console.log(`Übergebener Kunde: ${rulesCustomer}`);


    try {
        const response = await fetch(`https://vast-citadel-93222-f91f10e46ebf.herokuapp.com/api/chatbot`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'OpenAI-Beta': 'assistants=v2'
            },
            mode: 'cors',  // CORS-Modus hinzufügen
            body: JSON.stringify({
                "model": "gpt-4o",  // Füge den Model-Parameter hinzu
                "temperature": 0.3,  // Optionaler Parameter
                "top_p": 0.5,  // Optionaler Parameter


                "messages": [
                     ...getConversationHistoryForGPT(), //dies auch im anderen Chatbot ändern bzw. austauschen
                     {
                      "role": "user",
                      "content": `Antworte in der Sprache (${language}) ${message}`
                    }
                ],

                "context": rulesContext,
                "customer": rulesCustomer,

                "files": [],  // Hier können File IDs berücksichtig werden, die als Wissensbasis genutzt werden sollen. Die File ID ist innerhalb der eckigen Klammern in Anführungszeichen zu setzen. Sind keine File IDs angegeben, werden die File IDs genommen, die in der Flask App angegeben sind.
                "stream": false  // deaktiviert das Streaming
            })
        });

        console.log("Server response received");

        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Fehler beim Abrufen der Antwort: ${errorText}`);
        }

	console.log('Vor processIncomingData:', response);
	await processIncomingData(response);
	console.log('Nach processIncomingData');
        console.log("Finale Antwort empfangen.");

        //auch im anderen Chatbot löschen
        //saveMessage('user', message); // Speichern der Benutzernachricht im Verlauf



        // Status zurücksetzen
        isWaitingForResponse = false;

        // Loader verstecken
          loaderElement.style.display = 'none';
          document.getElementById('loader-container').style.display = 'none';
          document.getElementById('loader-text').style.display = 'none';

    } catch (error) {
        console.error("Request failed:", error);
        const errorElement = document.createElement('div');
        errorElement.textContent = 'Error: ' + error.message;
        messagesElement.appendChild(errorElement);

        // Status zurücksetzen
        isWaitingForResponse = false;

        // Loader verstecken
          loaderElement.style.display = 'none';
          document.getElementById('loader-container').style.display = 'none';
          document.getElementById('loader-text').style.display = 'none';
    } finally {
        // Immer ausführen: Eingabefeld leeren und Cursor positionieren
        inputElement.value = '';
        inputElement.focus();
    }
}




let currentBotMessageElement = null; // Variable zum Speichern des aktuellen Bot-Nachrichten-Elements

async function processIncomingData(response) {
    console.log('Received response:', response);

    // Empfange die gesamte Antwort als JSON
    const responseData = await response.json();

    // Extrahiere den Inhalt der Antwort
    let fullMessage = responseData.choices[0].message.content;
    console.log("Received full message:", fullMessage); // Logge die vollständige Nachricht

    // Bereinigung der Antwort
    fullMessage = fullMessage.replace(/```html/g, '');  // Entferne ```html
    fullMessage = fullMessage.replace(/```/g, '');  // Entferne alle übrigen ```
    fullMessage = fullMessage.replace(/^\s*html\s*$/gm, '');  // Entferne "html", wenn es alleine in einer Zeile steht


    // Zeige die empfangene Nachricht im Chatfenster an
    displayCleanedData(fullMessage);

    // Speichere die Bot-Antwort
    saveBotMessage(fullMessage);

    // Setze die Variable zurück, um die nächste Antwort korrekt zu verarbeiten
    currentBotMessageElement = null;

    // Zurücksetzen für die nächste Nachricht
    hasLoggedDisplayData = false;

    // Status zurücksetzen
    isWaitingForResponse = false;


}




function displayCleanedData(data) {
    if (data && typeof data === 'string') {
        const messagesElement = document.getElementById('chatbot-messages-gpt');

        // Überprüfen, ob die Nachricht bereits geloggt wurde
        if (!currentBotMessageElement) {
            currentBotMessageElement = document.createElement('div');
            currentBotMessageElement.classList.add('bot-message');
            messagesElement.appendChild(currentBotMessageElement);
        }

        // Aktualisieren Sie den Inhalt der Nachricht, ohne das Logging mehrfach zu machen
        if (!hasLoggedDisplayData) {
            currentBotMessageElement.innerHTML = data;
            // console.log("Nachricht erfolgreich aktualisiert:", data);
            hasLoggedDisplayData = true; // Setzt das Flag, um mehrfaches Logging zu vermeiden
        }


	scrollToLastUserQuestion();
        onBotMessageDisplayed(); // Scroll-Funktion nach dem Anzeigen der Bot-Nachricht aufrufen


    } else {
        console.error("Ungültige Datenstruktur oder leere Daten:", data);
    }
}






function clearMessages() {
    //location.reload(); Lädt die Seite neu
    const messagesElement = document.getElementById('chatbot-messages-gpt');
    while (messagesElement.firstChild) {
        messagesElement.removeChild(messagesElement.firstChild);
    }

    // Leere beide Historien (ConversationHistory und ChatbotHistory)
    conversationHistory = []; // Setzt die ConversationHistory zurück
    chatbotHistory = []; // Setzt die ChatbotHistory zurück
}




function updateSuggestedQuestions() {
    const selectedLanguage = document.getElementById('language-dropdown').value;
    setSuggestedQuestionsInDOM(selectedLanguage);
}











function setSuggestedQuestionsInDOM(language) {
    const translations = textTranslations[language];

    // Aktualisiere die statische Liste der "Beliebten Themen"
    const originalQuestionsContainer = document.getElementById('suggested-questions');
    const originalQuestionsHTML = `
      <p class="suggested-title" style="font-weight: bold; margin: 0 0 10px 0;">${translations.commonQuestions}</p>
      <ul class="suggested-list">
        ${translations.suggestedQuestions.map(question => `
          <li class="suggested-question-item" onclick="sendSuggestedMessage('${question}')">${question}</li>
        `).join('')}
      </ul>`;
    originalQuestionsContainer.innerHTML = originalQuestionsHTML;
}






function setThemesDropdownInDOM(language) {
  const translations = textTranslations[language];
  const themesContainer = document.getElementById('theme');

  const themesHTML = `
    <option value="">${translations.selectQuestion}</option>
    ${translations.themes.map(theme => `
      <option value="${theme}">${theme}</option>
    `).join('')}
  `;

  themesContainer.innerHTML = themesHTML;
}






function updateFlagAndSendMessage() {
    console.log("updateFlagAndSendMessage aufgerufen");

    const dropdown = document.getElementById('language-dropdown');
    const selectedOption = dropdown.options[dropdown.selectedIndex];
    const flagClass = selectedOption.getAttribute('data-flag');
    const selectedLanguage = document.getElementById('language-dropdown').value;

    console.log(`Ausgewählte Sprache: ${selectedLanguage}`);
    console.log(`Flaggen-Klasse: ${flagClass}`);

    // Aktualisiere die Flagge neben dem Dropdown
    document.getElementById('selected-flag').className = `flag-icon ${flagClass}`;
    console.log("Flagge aktualisiert");

    // Übersetze den Text basierend auf der ausgewählten Sprache
    const translations = textTranslations[selectedLanguage];
    console.log("Übersetzungen geladen:", translations);

    // Aktualisiere die `Themes`-Dropdown-Optionen:
    setThemesDropdownInDOM(selectedLanguage);

    // Ersetze {{dataProtectionUrl}} im consentText durch die URL aus den Sprachdaten
    const consentTextWithUrl = translations.consentText.replace('{{dataProtectionUrl}}', translations.dataProtectionUrl);
    console.log("Nutzungsbedingungen-Text aktualisiert:", consentTextWithUrl);

    // Aktualisiere den Text der Checkbox mit dem aktualisierten consentText
    const consentLabel = document.querySelector('#chatbot-consent label');
    consentLabel.innerHTML = consentTextWithUrl;
    console.log("Consent-Label aktualisiert");

    // Aktualisiere die Texte der Buttons
    //document.getElementById('chatbot-send-button').textContent = translations.sendButton;
    //console.log("Send-Button aktualisiert");

    //document.getElementById('chatbot-clear-button').textContent = translations.clearButton;
    //console.log("Clear-Button aktualisiert");

    document.getElementById('notOK').textContent = translations.notOK;
    console.log("Nachricht senden-Button aktualisiert");

    document.getElementById('everythingOK').textContent = translations.everythingOK;
    console.log("Everything-OK-Button aktualisiert");


    //document.getElementById('chatbot-Help-button').textContent = translations.helpButton;
    //console.log("Help-Button aktualisiert");

    document.getElementById('instant-answer-dialog-button').textContent = translations.SofortantwortOpenButton;
    console.log("Instant-Answer-Open-Button aktualisiert");

    //document.getElementById('instant-answer-dialog-schliessen-button').textContent = translations.SofortantwortCloseButton;
    //console.log("Instant-Answer-Close-Button aktualisiert");

    //document.getElementById('message-send-button').textContent = translations.message2Button;
    //console.log("Message2-Button aktualisiert");

    //document.getElementById('confirm-delete-button').textContent = translations.confirmButton;
    //console.log("Confirm-Delete-Button aktualisiert");

    //document.getElementById('confirm-delete-button2').textContent = translations.confirm2Button;
    //console.log("Confirm-Delete-Button2 aktualisiert");

    //document.getElementById('modal-ok-button').textContent = translations.confirm4Button;
    //console.log("modal-ok-button aktualisiert");

    //document.getElementById('cancel-button').textContent = translations.cancelButton;
    //console.log("Cancel-Button aktualisiert");

    //document.getElementById('cancel2-button').textContent = translations.cancel2Button;
    //console.log("Cancel2-Button aktualisiert");

    //document.getElementById('resetPageText1').textContent = translations.resetPageText1;
    //console.log("Reset-Text 1 aktualisiert");

    //document.getElementById('resetPageText2').textContent = translations.resetPageText2;
    //console.log("Reset-Text 2 aktualisiert");

    // Aktualisiere den Loader-Text
    document.getElementById('loader-text').textContent = translations['loader-text'];
    console.log("Loader-Text aktualisiert");

    // Aktualisiere den Platzhaltertext im Eingabefeld
    document.getElementById('chatbot-input').placeholder = translations.inputPlaceholder;
    //document.getElementById('expanded-chatbot-input').placeholder = translations.inputPlaceholder;
    console.log("Platzhalter im Eingabefeld aktualisiert");

    // Neue Texte für die Modalen Dialoge (Chat-Historie)
    //document.getElementById('chat-history-deleted').textContent = translations.chatHistoryDeleted;
    //console.log("Chat-History-Deleted-Text aktualisiert");

    //document.getElementById('chat-history-deleted-and-closed').textContent = translations.chatHistoryDeletedAndClosed;
    //console.log("Chat-History-Deleted-And-Closed-Text aktualisiert");
 

    // Nur senden, wenn die Checkbox aktiviert ist
    if (document.getElementById('chatbot-consent-checkbox').checked) {
        console.log("Checkbox ist aktiviert, sendLanguageMessage wird aufgerufen");
        sendLanguageMessage();
    } else {
        console.log("Checkbox ist nicht aktiviert, keine Nachricht wird gesendet");
    }

}







// Funktion zum Aktualisieren der vorgeschlagenen Fragen
function updateSuggestedQuestions() {
    const selectedLanguage = document.getElementById('language-dropdown').value;
    const translations = textTranslations[selectedLanguage];
    const suggestedQuestionsList = document.querySelector('#suggested-questions ul');

    // Leeren Sie die Liste zuerst
    suggestedQuestionsList.innerHTML = '';

    // Fügen Sie die Fragen basierend auf der ausgewählten Sprache hinzu
    translations.suggestedQuestions.forEach(question => {
        const li = document.createElement('li');
        li.style.cursor = 'pointer';
        li.style.color = 'var(--primary-font-color)';
        li.style.marginBottom = '5px';
        li.style.textDecoration = 'underline';
        li.onclick = function() { sendSuggestedMessage(question); };
        li.textContent = question;
        suggestedQuestionsList.appendChild(li);
    });
}





  // Funktion zum Senden in der ausgewählten Sprache
function sendLanguageMessage() {
    const language = document.getElementById('language-dropdown').value;
    console.log('Ausgewählte Sprache:', language);
    
    // Übersetzungstabelle für den Satz "Lass uns bitte <Sprache> sprechen."
    const translations = {
    "Deutsch": "Ich spreche Deutsch. Bitte übersetze die letzte Nachricht und auch alle folgenden ins Deutsche.", 
    "Englisch": "I speak English. Please translate your last message and also all following ones into English.",
    "Spanisch": "Hablo español. Por favor, traduce tu último mensaje y también los siguientes al español.",
    "Türkisch": "Türkçe konuşuyorum. Lütfen son mesajınızı ve tüm sonraki mesajları Türkçeye çevirin.",
    "Arabisch": "أنا أتحدث العربية. من فضلك ترجم رسالتك الأخيرة وجميع الرسائل التالية إلى اللغة العربية.",
    "Russisch": "Я говорю по-русски. Пожалуйста, переведите ваше последнее сообщение и все последующие на русский язык.",
    "Polnisch": "Mówię po polsku. Proszę przetłumacz ostatnią wiadomość i wszystkie kolejne na język polski.",
    "Rumänisch": "Vorbesc românește. Te rog să traduci ultimul mesaj și toate cele următoare în română.",
    "Griechisch": "Μιλάω ελληνικά. Παρακαλώ μετάφρασε το τελευταίο σου μήνυμα και όλα τα επόμενα στα ελληνικά.",
    "Italienisch": "Parlo italiano. Per favore, traduci il tuo ultimo messaggio e anche tutti i successivi in italiano."
    };

    // Nachricht in der ausgewählten Sprache
    const message = translations[language];
    console.log('Übersetzte Nachricht:', message);

    // Sende die Nachricht in der ausgewählten Sprache
    sendSuggestedMessage(message);
}



    // Funktion zum Senden einer vorgeschlagenen Nachricht
    function sendSuggestedMessage(message) {
      const consentGiven = document.getElementById('chatbot-consent-checkbox').checked;
      console.log('Consent-Checkbox:', consentGiven);

      if (!consentGiven) {
        alert('Bitte akzeptieren Sie die Nutzungsbedingungen, bevor Sie eine Frage stellen.');
        return;
      }

      console.log('Nachricht, die gesendet wird:', message);

      const inputElement = document.getElementById('chatbot-input');
      inputElement.value = message;
      sendMessage(); // Sende die vorgefertigte Nachricht
   
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
    }





    // Funktion zum Erkennen und Formatieren von Links in Nachrichten
    function parseLinks(text) {
        const urlPattern = /(https?:\/\/[^\s]+)/g;
        return text.replace(urlPattern, (url) => {
            return `<a href="${url}" target="_blank">${url}</a>`;
        });
    }
  




document.addEventListener('DOMContentLoaded', function() {
      const imageElement = document.getElementById('clara-image');

      if (imageElement) {
        const imageUrl = getComputedStyle(document.documentElement).getPropertyValue('--clara-image-url').trim();
        console.log('Bild-URL aus CSS-Variable:', imageUrl);

        // Setzen des Hintergrundbildes
        imageElement.style.backgroundImage = imageUrl;

        console.log('Hintergrundbild gesetzt:', imageElement.style.backgroundImage);
      } else {
        console.error('Bild-Element nicht gefunden');
      }
    });








// Funktion zum Initialisieren des Chatbot-Status
function initializeChatbot() {
    const inputElement = document.getElementById('chatbot-input');
    const sendButtonElement = document.getElementById('chatbot-send-button');
    const clearButtonElement = document.getElementById('chatbot-clear-button');
    
    // Überprüfen, ob die Elemente existieren, bevor sie manipuliert werden
    if (inputElement) inputElement.disabled = true;
    if (sendButtonElement) sendButtonElement.disabled = true;
    if (clearButtonElement) clearButtonElement.disabled = true;

    // SVG-Icons initial deaktivieren
    const icons = document.querySelectorAll('.icon');
    icons.forEach(icon => {
        icon.style.pointerEvents = 'none'; // Klickbarkeit deaktivieren
        icon.style.opacity = '0.5'; // Sichtbarkeit reduzieren (optional)
    });
}

// Funktion zum Überprüfen der Checkbox
document.getElementById('chatbot-consent-checkbox').addEventListener('change', function() {
    const isChecked = this.checked;

    // Basierend auf dem Status der Checkbox die Eingabefelder aktivieren oder deaktivieren
    document.getElementById('chatbot-input').disabled = !isChecked;
    document.getElementById('chatbot-send-button').disabled = !isChecked;
    document.getElementById('chatbot-clear-button').disabled = !isChecked;

      // SVG-Icons je nach Status der Checkbox aktivieren oder deaktivieren
    const icons = document.querySelectorAll('.icon.hover-scale');
    icons.forEach(icon => {
        if (isChecked) {
            icon.style.pointerEvents = 'auto'; // Klickbarkeit aktivieren
            icon.style.opacity = '1'; // Volle Sichtbarkeit (optional)
        } else {
            icon.style.pointerEvents = 'none'; // Klickbarkeit deaktivieren
            icon.style.opacity = '0.5'; // Sichtbarkeit reduzieren (optional)
        }
    });
});

// Initiale Deaktivierung beim Laden der Seite
initializeChatbot();



// Funktion zum Öffnen des Modal-Dialogs nur, wenn die Checkbox gesetzt ist
//document.getElementById('expand-icon').addEventListener('click', function() {
//  const isChecked = document.getElementById('chatbot-consent-checkbox').checked;
//  
//  if (isChecked) {
//    const chatbotInputValue = document.getElementById('chatbot-input').value;
//    const expandedInput = document.getElementById('expanded-chatbot-input');
//    
//    expandedInput.value = chatbotInputValue; // Übernahme des Inhalts ins Modal
//    document.getElementById('chatbot-input-modal').style.display = 'block'; // Modal anzeigen
//    
    // Cursor ans Ende des Textes setzen
//    expandedInput.focus();
//    expandedInput.setSelectionRange(expandedInput.value.length, expandedInput.value.length);
//  } else {
//    alert('Bitte stimmen Sie den Bedingungen zu, bevor Sie das Modal öffnen.');
//  }
//});



// Funktion zum Schließen des Modal-Dialogs und Zurückübertragen des Inhalts ins Chatbot-Input
function closeModal() {
    console.log('OK-Button wurde geklickt und closeModal() aufgerufen');

    // Überprüfen, ob der MIC-Button aktiv ist (die Spracherkennung läuft)
    if (micButton.classList.contains('active')) {
        // Simuliere einen Klick auf den MIC-Button, um die Spracherkennung zu stoppen
        micButton.click();
        console.log('Mikrofon durch OK-Button gestoppt (simulierter Klick auf MIC)');
    }

    // Übernahme des Inhalts zurück ins Input-Feld
    const expandedInputValue = document.getElementById('expanded-chatbot-input').value;
    document.getElementById('chatbot-input').value = expandedInputValue;
    
    // Modal verstecken
    document.getElementById('chatbot-input-modal').style.display = 'none';
    console.log('Modal geschlossen');
}









// Überprüfen, ob die Web Speech API im Browser verfügbar ist
if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();

    // Spracheingaben auf Deutsch setzen
    recognition.lang = 'de-DE';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;
    recognition.continuous = true;

    // Zugriff auf das Eingabefeld und den Mikrofon-Button
    const chatInput = document.getElementById('expanded-chatbot-input');
    const micButton = document.getElementById('micButton');

    
    // Event-Listener für den Mikrofon-Button
    micButton.addEventListener('click', function() {
    if (!isRecognizing && !recognitionStarted) {  // Änderung hier
        recognition.start();
        recognitionStarted = true;  // Spracherkennung wurde gestartet
        micButton.textContent = 'Mikrofon ist eingeschaltet';  // Button-Text ändern
        micButton.classList.add('active');  // Button visuell hervorheben
        console.log('Spracherkennung gestartet');
        isRecognizing = true;
    } else {
        recognition.stop();
        recognitionStarted = false;  // Spracherkennung wurde gestoppt
        isRecognizing = false;  // Direkte Änderung, um das Stoppen des Erkennungszustands zu reflektieren
        micButton.textContent = 'MIC';  // Button-Text zurücksetzen
        micButton.classList.remove('active');  // Button-Style zurücksetzen
        console.log('Spracherkennung gestoppt');
    }
});

let lastRecognizedText = '';  // Globale Variable für den gesamten Text



recognition.onsoundend = function() {
    console.log('Spracherkennung: Soundende erkannt, Mikrofon wird neu gestartet');

    // Prüfe, ob die Spracherkennung nicht bereits läuft
    if (isRecognizing && !recognitionStarted) {
        // Setze eine Verzögerung, um sicherzustellen, dass `recognition.start()` nur nach vollständigem Stopp aufgerufen wird
        setTimeout(function() {
            try {
                recognition.start();  // Starte die Erkennung nach einer Pause neu
                recognitionStarted = true;  // Setze erst hier auf true, nach erfolgreichem Start
                micButton.textContent = 'Mikrofon ist eingeschaltet';  // Button-Text ändern
                micButton.classList.add('active');  // Button-Style wieder aktiv setzen
                console.log('MIC-Button auf aktiv gesetzt, Mikrofon neu gestartet');
            } catch (e) {
                console.error('Fehler beim Starten der Spracherkennung:', e);
                recognitionStarted = false;  // Im Fehlerfall setzen wir den Zustand wieder auf false
            }
        }, 300);  // Erhöhe die Verzögerung auf 300 ms für einen sauberen Neustart
    } else {
        console.log('Spracherkennung läuft bereits, Neustart wird abgebrochen');
    }
};


// Dieses Event wird ausgelöst, wenn die Spracherkennung vollständig beendet wird
recognition.onend = function() {
    console.log('Spracherkennung wurde vollständig beendet');
    recognitionStarted = false;  // Setze zurück, da die Spracherkennung beendet wurde

    if (!isRecognizing) {
        micButton.textContent = 'MIC';  // Button-Text zurücksetzen
        micButton.classList.remove('active');  // Button-Style zurücksetzen
        console.log('MIC-Button auf inaktiv gesetzt, Spracherkennung gestoppt');
    } else {
        console.log('Spracherkennung wurde neu gestartet, MIC-Button bleibt aktiv');
    }
};



recognition.addEventListener('result', function(event) {
    let currentRecognizedText = event.results[0][0].transcript;  // Erkannten Text speichern
    console.log('Erkannter Text:', currentRecognizedText);

    // Füge den erkannten Text an den bestehenden Text im Eingabefeld an
    chatInput.value += ' ' + currentRecognizedText;  // Immer neuen Text anhängen

    // Stoppe die Spracherkennung
    recognition.stop();

    // Nur neu starten, wenn isRecognizing noch auf true gesetzt ist und der MIC-Button aktiv ist
    if (isRecognizing) {
        setTimeout(function() {
            recognition.start();  // Starte die Erkennung nur neu, wenn der MIC-Button aktiv ist
        }, 100);  // 100 ms Verzögerung für einen sauberen Neustart
    }
});








    // Fehlerbehandlung
    recognition.addEventListener('error', function(event) {
        console.error('Fehler bei der Spracherkennung:', event.error);
        isRecognizing = false;  // Im Fehlerfall sicherstellen, dass der Zustand korrekt gesetzt ist
    });

} else {
    console.error('Web Speech API wird in diesem Browser nicht unterstützt.');
}





function handleThemeChange() {
  const selectedTheme = document.getElementById('theme').value;
  if (selectedTheme) {
    sendSuggestedMessage(selectedTheme);
  }
}


function handleThemeChange() {
    const consentGiven = document.getElementById('chatbot-consent-checkbox').checked;
    
    if (!consentGiven) {
        alert('Bitte akzeptieren Sie die Nutzungsbedingungen, bevor Sie eine Frage stellen.');
        return; // Bricht die Funktion ab, falls die Checkbox nicht aktiviert ist
    }

    const selectedTheme = document.getElementById('theme').value;
    
    if (selectedTheme) {
        sendSuggestedMessage(selectedTheme); // Löst die Frage basierend auf dem ausgewählten Theme aus
    }
}






// Funktion zum Übertragen des Nachrichtenfelds in den Chatbot
function transferMessageToChatbot() {
  const consentGiven = document.getElementById('chatbot-consent-checkbox').checked;
  
  // Prüfen, ob die Consent-Checkbox aktiv ist
  if (!consentGiven) {
    opencloseChatbotConsentContainer(); 
    opencloseContactFormSectionContainer(); 
    opencloseInstantAnswerDialogButtonContainer(); 
    opencloseInstantAnswerDialogButton(); 
    opencloseOpenCloseButtonContainer(); 
    opencloseFactoringSectionContainer();
    alert('Bitte akzeptieren Sie die Nutzungsbedingungen, bevor Sie die Nachricht senden.');
    return;
  } 

openChatbot();

  // Das Nachrichtenfeld und Aktennummer anhand der data-id finden
  const ContactFormContainer = document.querySelector('#contact-form-section-container');
  const messageField = ContactFormContainer.querySelector('.contact-form-nachricht');
  const caseNumberField = ContactFormContainer.querySelector('.contact-form-aktennummer');

  // Sicherstellen, dass sowohl das Nachrichtenfeld als auch die Aktennummer existieren
  if (messageField && caseNumberField) {
    const message = messageField.value.trim(); // Inhalt des Nachrichtenfelds
    const caseNumber = caseNumberField.value.trim(); // Inhalt des Aktennummer-Felds

    // Nachricht mit optionaler Aktennummer erstellen
    let fullMessage = message;

    if (caseNumber) {
      fullMessage = `-> Aktennummer: ${caseNumber}<br>\n` + `-> Ihr Anliegen / Ihre Nachricht: ` + fullMessage;
    }

    if (fullMessage.trim()) {
      // Nachricht in das Chatbot-Textfeld übertragen
      document.getElementById('chatbot-input').value = fullMessage;

      // Nachricht automatisch senden
      sendMessage();
    } else {
      alert('Das Nachrichtenfeld ist leer.');
    }
  } else {
    alert('Nachrichtenfeld oder Aktennummer nicht gefunden.');
  }
}





// Funktion zum Übertragen des Nachrichtenfelds in den Chatbot - Nur für Factoring-Kunden
function transferFactoringMessageToChatbot() {
  const consentGiven = document.getElementById('chatbot-consent-checkbox').checked;
  
  // Prüfen, ob die Consent-Checkbox aktiv ist
  if (!consentGiven) {
    opencloseChatbotConsentContainer(); 
    opencloseContactFormSectionContainer(); 
    opencloseInstantAnswerDialogButtonContainer(); 
    opencloseInstantAnswerDialogButton(); 
    opencloseOpenCloseButtonContainer(); 
    opencloseFactoringSectionContainer();
    alert('Bitte akzeptieren Sie die Nutzungsbedingungen, bevor Sie die Nachricht senden.');
    return;    
  }



openChatbot();

  // Das Nachrichtenfeld und Rechnungsnummer anhand der data-id finden
  const factoringContainer = document.querySelector('#factoring-section-container');
  const rechnungsstellerField = factoringContainer.querySelector('.rechnungssteller');
  const caseNumberField = factoringContainer.querySelector('.rechnungsnummer');
  const messageField = factoringContainer.querySelector('.contact-form-nachricht');
  

  // Sicherstellen, dass sowohl das Nachrichtenfeld als auch die Aktennummer existieren
  if (messageField && caseNumberField  && rechnungsstellerField) {
    const message = messageField.value.trim(); // Inhalt des Nachrichtenfelds
    const caseNumber = caseNumberField.value.trim(); // Inhalt des Aktennummer-Felds
    const rechnungsstellerName = rechnungsstellerField.value.trim(); // Inhalt des Rechnungssteller-Felds

    // Nachricht mit optionaler Aktennummer erstellen
    let fullMessage = message;
    
    if (caseNumber) {
      fullMessage = `-> Rechnungsnummer: ${caseNumber}<br>\n` + `-> Ihr Anliegen / Ihre Nachricht: ` + fullMessage;
    }

    let fullMessagePlus = fullMessage;

    if (rechnungsstellerName) {
      fullMessagePlus = `-> Rechnungssteller: ${rechnungsstellerName}<br>\n` + fullMessage;
    }


    if (fullMessagePlus.trim()) {
      // Nachricht in das Chatbot-Textfeld übertragen
      document.getElementById('chatbot-input').value = fullMessagePlus;

      // Nachricht automatisch senden
      sendMessage();
    } else {
      alert('Das Nachrichtenfeld ist leer.');
    }
  } else {
    alert('Nachrichtenfeld oder Rechnungsnummer nicht gefunden.');
  }
}




function openChatbot() {
    // Den Chatbot-Container anzeigen
    document.getElementById('chatbot-container').style.display = 'flex';

    // Den Button "Sofortantwort" ausblenden, da der Chatbot nun eingeblendet ist
    document.getElementById('instant-answer-dialog-button').style.display = 'none';

    // Den Button "Nachricht senden" ausblenden
    document.getElementById('message-send-button').style.display = 'none';
  

    // Den Button "Sofortantwort" ausblenden, da der Chatbot nun eingeblendet ist
    document.getElementById('factoring-instant-answer-dialog-button').style.display = 'none';

    // Den Button "Nachricht senden" ausblenden
    document.getElementById('factoring-message-send-button').style.display = 'none';


}






// Standardmäßig den Chatbot-Container beim Laden der Seite verstecken,
// nur wenn der Wert von --rules-context den gewünschten entspricht
document.addEventListener('DOMContentLoaded', function() {
    // Den Wert der CSS-Variable aus :root abfragen
    const rootStyles = getComputedStyle(document.documentElement);
    const rulesContext = rootStyles.getPropertyValue('--rules-context').trim();

    // Gewünschte Werte prüfen
    if (rulesContext === 'ChatbotContact' || rulesContext === 'ChatbotContactFactoring') {
        document.getElementById('chatbot-container').style.display = 'none';
        document.getElementById('instant-answer-dialog-schliessen-button').style.display = 'none';
    }
});






function closeChatbot() {

    // Den Chatbot-Container schließen
    document.getElementById('chatbot-container').style.display = 'none';


};



function getChatbotHistory() {
    // Hole alle User- und Bot-Nachrichten-Elemente
    const userMessages = document.querySelectorAll('#chatbot-messages-gpt .user-message');
    const botMessages = document.querySelectorAll('#chatbot-messages-gpt .bot-message');
    
    // Debugging-Logs: Überprüfe, ob Nachrichten-Elemente gefunden werden
    if (userMessages.length === 0) {
        console.error('Keine User-Nachrichten gefunden. Überprüfe die HTML-Struktur und die Klassen.');
    }
    
    if (botMessages.length === 0) {
        console.error('Keine Bot-Nachrichten gefunden. Überprüfe die HTML-Struktur und die Klassen.');
    }
    
    let chatHistory = '';
    let messageCount = Math.min(userMessages.length, botMessages.length); // Anzahl der zu bearbeitenden Nachrichten
    
    console.log(`Anzahl der User-Nachrichten: ${userMessages.length}`);
    console.log(`Anzahl der Bot-Nachrichten: ${botMessages.length}`);
    console.log(`Verarbeitete Nachrichten-Paare: ${messageCount}`);

    for (let i = 0; i < messageCount; i++) {
        let userMessage = userMessages[i].textContent.replace(/<[^>]*>/g, '').trim(); // Entferne HTML-Tags und Leerzeichen
        let botMessage = botMessages[i].textContent.replace(/<[^>]*>/g, '').trim(); // Entferne HTML-Tags und Leerzeichen

        // Füge die Nachrichten im gewünschten Format hinzu
        chatHistory += `Benutzernachricht:###${userMessage}######Chatbot-Nachricht:###${botMessage}#########`;

        // Log für jede Nachricht
        console.log(`Benutzernachricht [${i + 1}]: ${userMessage}`);
        console.log(`Chatbot-Nachricht [${i + 1}]: ${botMessage}`);
    }

    console.log("Strukturierte Chat-Historie:");
    console.log(chatHistory.trim());

    return chatHistory.trim(); // Rückgabe der strukturierten Chat-Historie
}



// Funktion zum Abrufen des Namens aus dem Formular
function getFormName() {
    const formNameElement = document.querySelector('#contact-form-name'); // Holt das Eingabefeld
    let formName = ''; // Korrekte Deklaration der Variablen
    
    if (formNameElement) {
        formName = formNameElement.value; // Weist den Wert des Eingabefelds der Variable zu
    }

    return formName; 
}


// Funktion zum Abrufen der Email aus dem Formular
function getFormEmail() {
    const formEmailElement = document.querySelector('#contact-form-email'); // Holt das Eingabefeld
    let formEmail = ''; // Korrekte Deklaration der Variablen
    
    if (formEmailElement) {
        formEmail = formEmailElement.value; // Weist den Wert des Eingabefelds der Variable zu
    }

    return formEmail; 
}


// Funktion zum Abrufen der Nachricht aus dem Formular
function getKontaktnachricht() {
    const formKontaktnachrichtElement = document.querySelector('.contact-form-nachricht'); // Holt das Eingabefeld
    let formKontaktnachricht = ''; // Korrekte Deklaration der Variablen
    
    if (formKontaktnachrichtElement) {
        formKontaktnachricht = formKontaktnachrichtElement.value; // Weist den Wert des Eingabefelds der Variable zu
    }

    return formKontaktnachricht; 
}







// Funktion zum Abrufen und Anzeigen der übersetzten Daten ohne Streaming
async function translateChatHistoryToGermanWithFlaskAPI(chatHistory) {
    
    // Loader anzeigen
    const loaderElement = document.getElementById('loader');
    loaderElement.style.display = 'block';
    document.getElementById('loader-container').style.display = 'flex';
    document.getElementById('loader-text').style.display = 'block';
    
    try {
        // Anfrage an die Flask-API
        const response = await fetch('https://app-translate-chat-translate-d90fae4da777.herokuapp.com/translate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ text: chatHistory })  // Chatverlauf übergeben
        });

        // Die JSON-Antwort verarbeiten (kein Streaming mehr)
        const responseData = await response.json();
        let receivedText = ''; // Variable, um den gesamten Text zu sammeln

        // Überprüfen, ob Daten vorhanden sind und extrahiere den Text
        if (responseData && responseData.choices && responseData.choices[0].message.content) {
            receivedText = responseData.choices[0].message.content;  // Empfangenen Text sammeln
        }

        // Entferne \n und spezifische Zeichenfolgen aus dem gesamten Text
        console.log('Vor der Bereinigung:', receivedText);
        receivedText = receivedText.replace(/```html/g, '').replace(/```/g, '');  // Unerwünschte Zeichenfolgen entfernen
        receivedText = insertParagraphs(receivedText); // Füge Absätze ein
        console.log('Nach der Bereinigung:', receivedText);

        console.log('Verarbeiteter Text:', receivedText); // Zeige den verarbeiteten Text in der Konsole

        return receivedText.trim(); // Gibt den gesamten Text zurück, wenn der Vorgang abgeschlossen ist

    } catch (error) {
        console.error("Fehler bei der Übersetzung:", error);  // Fehlerbehandlung
    } finally {
        // Loader verstecken
        loaderElement.style.display = 'none';
        document.getElementById('loader-container').style.display = 'none';
        document.getElementById('loader-text').style.display = 'none';
    }
}





function insertParagraphs(text) {
    // Füge nach jedem Satzzeichen gefolgt von einem Leerzeichen einen Absatz ein
    return text.replace(/([.!?])\s+/g, '$1\n\n');
}





// Öffne das Modal für die Bestätigung zum Löschen der Chat-Historie
function openDeleteConfirmation() {
    //const modalOverlay = document.getElementById("modal-overlay");
    //modalOverlay.style.display = "flex";
    const modal = document.getElementById("delete-confirmation-modal");
    modal.style.display = "flex";
    document.body.classList.add("modal-open"); 
    document.body.style.overflow = 'hidden';
}


// Öffne das Modal für die Bestätigung zum Löschen der Chat-Historie
function openDeleteConfirmation2() {
    const modal = document.getElementById("delete-history-and-close-chatbot-background");
    modal.style.display = "flex";
    document.body.classList.add("modal-open"); 
    document.body.style.overflow = 'hidden'; 
}




// Schließe das Modal ohne Aktion
function closeDeleteConfirmation() {
    document.getElementById('delete-confirmation-modal').style.display = 'none';
    document.getElementById('delete-confirmation-modal3').style.display = 'none';
    document.getElementById('delete-history-and-close-chatbot-background').style.display = 'none';
    // document.getElementById('modal-overlay').style.display = 'none';
    document.body.classList.remove("modal-open");
    document.body.style.overflow = '';
}



// Bestätige das Löschen und lösche die Nachrichten
function confirmDelete() {
    clearMessages(); // Die Funktion zum Löschen der Chat-Historie
    closeDeleteConfirmation(); // Schließe das Modal nach der Bestätigung
}





// Bestätige das Löschen, lösche die Nachrichten und schließe den Chatbot
function confirmDelete2() {
  
  clearMessages(); // Die Funktion zum Löschen der Chat-Historie
  closeDeleteConfirmation(); // Schließe das Modal nach der Bestätigung
  
  //removeAllCollapsed();
  opencloseOpenCloseButtonContainer();
  opencloseChatbotConsentContainer();
  opencloseFactoringSectionContainer();
  opencloseContactFormSectionContainer();
  
  // Den Chatbot-Container schließen
  document.getElementById('chatbot').style.display = 'none';

    // Bereich in Bearbeitung  
  
    //document.getElementById('input-button-container').style.display = 'none';

    // Den Wert der CSS-Variable aus :root abfragen
    //const rootStyles = getComputedStyle(document.documentElement);
    //const rulesContext = rootStyles.getPropertyValue('--rules-context').trim();

    
    //if (rulesContext === 'ChatbotContact') {
      
    //  opencloseFactoringInstantAnswerDialogButtonContainer();
      // Den Button "Sofortantwort schließen" ausblenden
    //  document.getElementById('instant-answer-dialog-schliessen-button').style.display = 'none';
    //  opencloseInstantAnswerDialogButtonContainer();

    //  document.getElementById('instant-answer-dialog-button-container').style.display = 'block';

      // Den Button "Sofortantwort" einblenden, da der Chatbot nun ausgeblendet ist
    //  document.getElementById('instant-answer-dialog-button').style.display = 'block';
      // Den Button "Nachricht senden" einblenden
    //  document.getElementById('message-send-button').style.display = 'block';
    // };

    //if (rulesContext === 'ChatbotContactFactoring') {
    
      //opencloseInstantAnswerDialogButtonContainer();
           
      //const factoringContainer = document.getElementById('factoring-instant-answer-dialog-button-container');
      //factoringContainer.classList.remove('collapsed');
      //factoringContainer.classList.remove('collapsible-container');
      //factoringContainer.style.setProperty('display', 'flex', 'important');
      //factoringContainer.style.removeProperty('max-height');
      //factoringContainer.style.removeProperty('overflow');


      
      // Den Button "Sofortantwort schließen" ausblenden
      //document.getElementById('factoring-instant-answer-dialog-schliessen-button').style.display = 'none';
      //opencloseFactoringInstantAnswerDialogButtonContainer();

      //document.getElementById('factoring-instant-answer-dialog-button-container').style.display = 'flex';

      // Den Button "Sofortantwort" einblenden, da der Chatbot nun ausgeblendet ist
      //document.getElementById('factoring-instant-answer-dialog-button').style.display = 'block';
      // Den Button "Nachricht senden" einblenden
      // document.getElementById('factoring-message-send-button').style.display = 'block';

      
    // };

}






async function getTranslatedChatHistoryForEmail() {
    console.log("Starte das Holen und Übersetzen des Chatverlaufs...");

    // Hol den Chatverlauf
    const chatHistory = getChatbotHistoryForTranslation();  // Bestehende Funktion zur Chatverlauf-Abfrage
    console.log("Originaler Chatverlauf: ", chatHistory);

    try {
        // Übersetze den Chatverlauf
        const translatedText = await translateChatHistoryToGermanWithFlaskAPI(chatHistory);
        console.log("Übersetzter Chatverlauf: ", translatedText);

        return translatedText;  // Gib den übersetzten Verlauf zurück

    } catch (error) {
        console.error('Fehler bei der Übersetzung des Chatverlaufs:', error);
        throw error;  // Gib den Fehler weiter, damit er an anderer Stelle abgefangen werden kann
    }
}



async function openConfirmationModal() {

    // Container A und B abrufen
    const containerA = document.querySelector('#factoring-section-container');
    const containerB = document.querySelector('#contact-form-section-container');

    // Prüfen, welcher Container existiert
    const activeContainer = containerA || containerB;

    if (!activeContainer) {
        console.error("Keiner der Container existiert.");
        return; // Funktion abbrechen, wenn kein Container existiert
    }


    // Werte abrufen und auf Standardwerte zurückfallen, falls Felder fehlen
    const rechnungsstellerValue = activeContainer.querySelector('.rechnungssteller')?.value || '';
    const rechnungsnummerValue = activeContainer.querySelector('.rechnungsnummer')?.value || '';
    const aktennummerValue = activeContainer.querySelector('.contact-form-aktennummer')?.value || '';
    const nameValue = activeContainer.querySelector('.contact-form-name')?.value || '';
    const emailValue = activeContainer.querySelector('.contact-form-email')?.value || '';
    const messageValue = activeContainer.querySelector('.contact-form-nachricht')?.value || '';

    // Felder im Modal befüllen
    document.getElementById("modalRechnungssteller").innerText = rechnungsstellerValue;
    document.getElementById("modalRechnungsnummer").innerText = rechnungsnummerValue;
    document.getElementById("modalAktennummer").innerText = aktennummerValue;
    document.getElementById("modalName").innerText = nameValue;
    document.getElementById("modalEmail").innerText = emailValue;
    document.getElementById("modalMessage").value = messageValue;


// Die übersetzte Chat-Historie abrufen
const translatedChatHistory = insertParagraphs(await getTranslatedChatHistoryForEmail());

// Übersetzte Chat-Historie im Modal anzeigen
document.getElementById('translated-chat-history').innerText = translatedChatHistory;


// Element-Referenzen erstellen
const languageDropdown = document.getElementById('language-dropdown');
const instantAnswerButton = document.getElementById('instant-answer-dialog-button');
let targetElement;

// Überprüfen, ob Language Dropdown sichtbar ist
if (languageDropdown && languageDropdown.offsetParent !== null) {
    targetElement = languageDropdown; // Wenn sichtbar, zum Language-Dropdown scrollen
} else if (instantAnswerButton) {
    targetElement = instantAnswerButton; // Andernfalls zum Button scrollen
} else {
    console.error("Kein gültiges Ziel zum Scrollen gefunden.");
    return;
}

// Scrollen zum Ziel-Element
targetElement.scrollIntoView({
    behavior: 'smooth', // Sanftes Scrollen
    block: 'center'     // Zentriert das Ziel-Element im sichtbaren Bereich
});

// Wartezeit, um sicherzustellen, dass das Scrollen abgeschlossen ist
setTimeout(function() {

    fillModalContent(); // Die Funktion aufrufen, um die Inhalte zu füllen

    // Modalen Dialog anzeigen
    const modal = document.getElementById("confirmModal");
    modal.style.setProperty("display", "flex", "important");
    document.body.classList.add("modal-open"); // Modalität aktivieren

    // "Senden"-Button im modalen Dialog
    document.getElementById("confirmSend").onclick = async function() {
        modal.style.display = "none";  // Dialog ausblenden
        document.body.classList.remove("modal-open"); // Modalität deaktivieren


    var messageValue = document.getElementById("modalMessage").value;

    var companyName = getComputedStyle(document.documentElement).getPropertyValue('--company-name').replace(/"/g, '').trim();
    var companyEmail = getComputedStyle(document.documentElement).getPropertyValue('--company-email').replace(/"/g, '').trim();



        try {
            // POST-Anfrage an Flask senden, um die E-Mail zu versenden
            const response = await fetch(`https://vast-citadel-93222-f91f10e46ebf.herokuapp.com/send-email`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                mode: 'cors',  // CORS-Modus aktivieren
                body: JSON.stringify({
                    company: companyName,                    // Firma, an die gesendet wird
                    recipient_email: companyEmail,           // Ziel-E-Mail-Adresse
                    rechnungssteller: rechnungsstellerValue, // Rechnungssteller des Chatbot-Benutzers
                    rechnungsnummer: rechnungsnummerValue,   // Rechnungsnummer des Chatbot-Benutzers
                    aktennummer: aktennummerValue,           // Aktennummer des Chatbot-Benutzers
                    name: nameValue,                         // Name des Chatbot-Benutzers
                    user_email: emailValue,                  // E-Mail des Chatbot-Benutzers
                    message: messageValue,                   // Nachricht des Chatbot-Benutzers
                    chat_history: await getTranslatedChatHistoryForEmail() // Hol den übersetzten Chatverlauf

                })
            });

            const result = await response.json();
            if (result.success) {
                // Benutzerdefinierte Bestätigung anzeigen und sichtbar machen
                const confirmationMessage = document.getElementById("confirm2Modal");
                confirmationMessage.style.display = "block";  
                setTimeout(function() {
                    confirmationMessage.style.display = "none";
                    location.reload();
                }, 3500);
            } else {
                console.error('Fehler beim Senden der E-Mail:', result.error);
            }
        } catch (error) {
            console.error('Fehler beim Senden der Anfrage:', error);
        }

        // Diese Zeile auskommentieren, da das Formular nicht mehr verwendet wird
        // document.querySelector(".form-button").click(); // Formular absenden

    };

    // "Abbrechen"-Button im modalen Dialog
    document.getElementById("cancelSend").onclick = function() {
        modal.style.display = "none";  // Dialog ausblenden
        document.body.classList.remove("modal-open"); // Modalität deaktivieren
        console.log("Senden abgebrochen");
    };

}, 500); // Wartezeit (500 ms) nach dem Scrollen
}



function fillModalContent() {
    // CSS-Variablen aus dem root-Element auslesen
    var companyName = getComputedStyle(document.documentElement).getPropertyValue('--company-name').replace(/"/g, '').trim();
    var companyStreet = getComputedStyle(document.documentElement).getPropertyValue('--company-street').replace(/"/g, '').trim();
    var companyCity = getComputedStyle(document.documentElement).getPropertyValue('--company-city').replace(/"/g, '').trim();
    var companyEmail = getComputedStyle(document.documentElement).getPropertyValue('--company-email').replace(/"/g, '').trim();

    // Debugging: Überprüfen, ob die Variablen korrekt ausgelesen werden
    console.log("Company Name:", companyName);
    console.log("Company Street:", companyStreet);
    console.log("Company City:", companyCity);
    console.log("Company Email:", companyEmail);

    // Elemente aus dem DOM auswählen
    var recipientNameElement = document.getElementById('recipientName');
    var recipientStreetElement = document.getElementById('recipientStreet');
    var recipientCityElement = document.getElementById('recipientCity');
    var recipientEmailElement = document.getElementById('recipientEmail');

    // Überprüfen, ob die Elemente existieren, und den Textinhalt setzen
    if (recipientNameElement) {
        recipientNameElement.textContent = companyName;
    }

    if (recipientStreetElement) {
        recipientStreetElement.textContent = companyStreet;
    }

    if (recipientCityElement) {
        recipientCityElement.textContent = companyCity;
    }

    if (recipientEmailElement) {
        recipientEmailElement.textContent = companyEmail;
    }
}



function resetPage() {
    location.reload(); // Lädt die Seite neu
    setTimeout(() => {
        window.scrollTo(0, 0); // Scrollt nach oben, falls die Seite an eine alte Position zurückspringt
    }, 0);
}



// Öffne das Modal für die Bestätigung zum Löschen der Chat-Historie
function openDeleteConfirmation3() {
    // Nach oben scrollen mit sanftem Verhalten
    window.scrollTo({
        top: 0,
        left: 0,
        behavior: 'smooth'
    });

    // Modal anzeigen mit kleinem Delay
    setTimeout(() => {
        const modal = document.getElementById("delete-confirmation-modal3");
        modal.style.display = "block";
        document.body.classList.add("modal-open"); // Modalität aktivieren
        document.body.style.overflow = 'hidden'; // Hintergrundscrolling deaktivieren
    }, 300); // 300 ms Delay
}






//document.addEventListener('DOMContentLoaded', function() {
//    const button = document.querySelector('#input-right');
//
//    if (button) {
//        console.log('Button gefunden');

        // Klick-Event für den Button behandeln
//        button.addEventListener('click', function() {
//            console.log('Sende Nachricht durch Klick');
//            sendMessage();
//        });
//    } else {
//        console.log('Button nicht gefunden');
//    }
//});





function forwardBotMessage() {
    // Hol dir die letzte Nachricht vom Assistenten
    const lastAssistantMessage = conversationHistory.reverse().find(message => message.role === 'assistant');

    if (lastAssistantMessage) {
        // Bereinige die Nachricht, indem du alle HTML-Tags entfernst, ohne etwas hinzuzufügen
        let cleanedMessage = lastAssistantMessage.content.replace(/<[^>]*>/g, '');

        // Kopiere den bereinigten Text in die Zwischenablage
        navigator.clipboard.writeText(cleanedMessage.trim()).then(() => {
            console.log('Letzte bereinigte Bot-Nachricht erfolgreich in die Zwischenablage kopiert:', cleanedMessage);
        }).catch(err => {
            console.error('Fehler beim Kopieren in die Zwischenablage:', err);
        });

        return cleanedMessage;
    } else {
        console.error('Keine Bot-Nachrichten gefunden');
        return null;
    }
}



document.addEventListener('DOMContentLoaded', function () {
    const companyMainUrl = getComputedStyle(document.documentElement)
        .getPropertyValue('--company-main-url')
        .trim();

    // Finde den <a>-Tag im Element mit der ID "logo-header"
    const companyMainLink = document.querySelector('#logo-header a');
    if (companyMainLink) {
        companyMainLink.href = companyMainUrl; // Setze die URL
    } else {
        console.error('Link-Element im Header wurde nicht gefunden.');
    }
});




function opencloseChatbotConsentContainer() {
    const container = document.getElementById('chatbot-consent-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}

function opencloseContactFormSectionContainer() {
    const container = document.getElementById('contact-form-section-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}

function opencloseFactoringSectionContainer() {
    const container = document.getElementById('factoring-section-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}

function opencloseInstantAnswerDialogButtonContainer() {
    const container = document.getElementById('instant-answer-dialog-button-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}

function opencloseFactoringInstantAnswerDialogButtonContainer() {
    const container = document.getElementById('factoring-instant-answer-dialog-button-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}


function opencloseInstantAnswerDialogButton() {
    const container = document.getElementById('instant-answer-dialog-button');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}


function opencloseOpenCloseButtonContainer() {
    const container = document.getElementById('open-close-button-container');
    container.classList.toggle('collapsed'); // Fügt 'collapsed' hinzu oder entfernt sie
}



function removeAllCollapsed() {
    // Wählt alle Container mit der Klasse .collapsible-container aus
    const containers = document.querySelectorAll('.collapsible-container');
    
    containers.forEach(container => {
        container.classList.remove('collapsed'); // Entfernt 'collapsed' von jedem Container
        console.log(`'collapsed' entfernt von:`, container);
    });
}





document.addEventListener('DOMContentLoaded', function () {
    console.log("DOMContentLoaded: JavaScript geladen und DOM bereit.");
    const inputField = document.querySelector('.rechnungssteller');
    const suggestionBox = document.querySelector('.suggestion-box-container');
    let currentFocus = -1;

    if (!inputField || !suggestionBox) {
        console.error("Eingabefeld oder Vorschlagsbox nicht gefunden!");
        return;
    }

    console.log("Eingabefeld gefunden:", inputField);

    // Eingabefeld: Vorschläge abrufen
    inputField.addEventListener('input', function () {
        const query = inputField.value.trim();
        if (query.length > 0) {
            fetchSuggestions(query);
        } else {
            closeSuggestionBox();
        }
    });

    
    



    inputField.addEventListener('keydown', function (event) {
    const items = suggestionBox.querySelectorAll('.suggestion-item');
    if (!items.length || suggestionBox.style.display === 'none') return; // Keine Aktion, wenn die Liste leer oder unsichtbar ist

    switch (event.key) {
        case 'ArrowDown':
            console.log("Aktueller Fokus vor Keydown:", currentFocus);
            event.preventDefault(); // Verhindert Scrollen der Seite

            // Setze Fokus auf das erste Element, falls er nicht gesetzt ist
            if (currentFocus === -1) {
                currentFocus = 0;
            } else {
                currentFocus = (currentFocus + 1) % items.length; // Nächster Eintrag
            }

            setActive(items, currentFocus);
            break;

        case 'ArrowUp':
            event.preventDefault();

            // Bewege den Fokus zum vorherigen Element
            if (currentFocus === -1) {
                currentFocus = items.length - 1; // Starte am Ende
            } else {
                currentFocus = (currentFocus - 1 + items.length) % items.length; // Bewege nach oben
            }

            setActive(items, currentFocus);
            break;

        case 'Enter':
            event.preventDefault();
            if (currentFocus > -1) {
                items[currentFocus].click(); // Simuliere Klick auf das aktuelle Element
            }
            break;

        case 'Tab': // Schließt die Box bei TAB
            closeSuggestionBox();
            break;
    }
});

function setActive(items, index) {
    console.log("Markiere Element mit Index:", index);
    if (items[index]) {
        console.log("Aktuelles Element:", items[index].textContent);
    }
    items.forEach(item => item.classList.remove('active'));
    if (index > -1) {
        items[index].classList.add('active');
        items[index].scrollIntoView({ block: 'nearest' });
    }
}


function updateSuggestions(suggestions) {
    suggestionBox.innerHTML = ''; // Box leeren
    currentFocus = -1; // Fokus zurücksetzen

    if (suggestions.length === 0) {
        const noResultItem = document.createElement('li');
        noResultItem.textContent = 'Keine Treffer';
        noResultItem.classList.add('no-result');
        suggestionBox.appendChild(noResultItem);
    } else {
        suggestions.forEach(suggestion => {
            const listItem = document.createElement('li');
            listItem.textContent = suggestion;
            listItem.classList.add('suggestion-item');

            listItem.addEventListener('click', function () {
                inputField.value = suggestion; // Eingabefeld aktualisieren
                closeSuggestionBox();
            });

            suggestionBox.appendChild(listItem);
        });
    }

    if (suggestions.length > 0) {
        suggestionBox.style.display = 'block'; // Box einblenden
    }

    if (suggestions.length > 0) {
    currentFocus = 0; // Setze Fokus auf den ersten Eintrag
    setActive(suggestionBox.querySelectorAll('.suggestion-item'), currentFocus);
    }

}







function closeSuggestionBox() {
    suggestionBox.style.display = 'none';
    suggestionBox.innerHTML = '';
    currentFocus = -1;
}


    // Vorschläge von der API abrufen
    function fetchSuggestions(query) {
        console.log("Starte Abruf von Vorschlägen mit Query:", query);
        fetch(`https://vast-citadel-93222-f91f10e46ebf.herokuapp.com/api/get_biller_names?query=${encodeURIComponent(query)}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
            mode: 'cors'
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`Fehler beim Abrufen der Vorschläge: ${response.statusText}`);
            }
            return response.json();
        })
        .then(data => {
            updateSuggestions(data.biller_names);
        })
        .catch(error => {
            console.error("Fehler beim Abrufen der Vorschläge:", error);
        });
    }
});

const passwort = prompt("Bitte geben Sie das Passwort ein:");
if (passwort !== "vila") {
  document.body.innerHTML = "Zugriff verweigert.";
}


</script>





</body>
</html>